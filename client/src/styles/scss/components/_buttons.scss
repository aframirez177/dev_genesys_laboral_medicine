@use "sass:map";
@use "sass:color";
@use "../base/mixins";
@use "../base/variables";

// ========================================
// üé® SISTEMA UNIFICADO DE BOTONES
// ========================================
// Dise√±ado seg√∫n principios WCAG AA y UX modernas

// ========================================
// Base com√∫n para todos los botones
// ========================================
// NOTA: 1rem = 10px (debido a font-size: 62.5% en html)
%button-base {
    // Estructura y layout
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;  // 8px
    
    // Espaciado
    padding: 0.8rem 2.4rem;  // 8px 24px
    min-height: 4.4rem;  // 44px - Tama√±o m√≠nimo t√°ctil WCAG
    
    // Tipograf√≠a
    font-family: map.get(variables.$fonts, "body");
    font-size: 1.6rem;  // 16px
    font-weight: 600;
    line-height: 1.5;
    text-align: center;
    text-decoration: none;
    white-space: nowrap;
    
    // Visual
    border-radius: map.get(variables.$radius, "lg");
    border: 2px solid transparent;
    cursor: pointer;
    user-select: none;
    
    // Transiciones suaves
    transition: all map.get(variables.$transitions, "base");
    
    // Estados base
    &:hover {
        transform: translateY(-2px);
        box-shadow: map.get(variables.$shadows, "md");
    }
    
    &:active {
        transform: translateY(0);
        box-shadow: map.get(variables.$shadows, "sm");
    }
    
    // üéØ Accesibilidad: Foco visible
    &:focus-visible {
        outline: 3px solid map.get(variables.$colors, "text-primary-accessible");
        outline-offset: 2px;
    }
    
    // Estado deshabilitado
    &:disabled,
    &[aria-disabled="true"] {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }
}

// ========================================
// üü¢ BOT√ìN PRIMARY (CTA Principal)
// ========================================
.cta-button,
.btn-primary {
    @extend %button-base;
    background-color: map.get(variables.$colors, "primary");
    color: map.get(variables.$colors, "secondary");
    border-color: map.get(variables.$colors, "primary");
    
    &:hover {
        background-color: color.adjust(map.get(variables.$colors, "primary"), $lightness: -10%);
        border-color: color.adjust(map.get(variables.$colors, "primary"), $lightness: -10%);
    }
    
    &:active {
        background-color: color.adjust(map.get(variables.$colors, "primary"), $lightness: -15%);
    }
}

// ========================================
// ‚ö™ BOT√ìN SECONDARY (Outline/Ghost)
// ========================================
.cta-button-1,
.btn-secondary,
.btn-outline {
    @extend %button-base;
    background-color: transparent;
    color: map.get(variables.$colors, "text-dark");
    border-color: map.get(variables.$colors, "text-dark");
    
    &:hover {
        background-color: map.get(variables.$colors, "text-dark");
        color: #ffffff;
    }
    
    &:active {
        background-color: color.adjust(map.get(variables.$colors, "text-dark"), $lightness: -10%);
    }
}

// ========================================
// üîµ BOT√ìN GHOST (Sin borde)
// ========================================
.btn-ghost {
    @extend %button-base;
    background-color: transparent;
    color: map.get(variables.$colors, "text-primary-accessible");
    border-color: transparent;
    
    &:hover {
        background-color: rgba(map.get(variables.$colors, "primary"), 0.1);
    }
    
    &:active {
        background-color: rgba(map.get(variables.$colors, "primary"), 0.2);
    }
}

// ========================================
// üî¥ BOT√ìN DANGER (Acciones destructivas)
// ========================================
.btn-danger {
    @extend %button-base;
    background-color: map.get(variables.$colors, "danger");
    color: #ffffff;
    border-color: map.get(variables.$colors, "danger");
    
    &:hover {
        background-color: color.adjust(map.get(variables.$colors, "danger"), $lightness: -10%);
    }
}

// ========================================
// üìê TAMA√ëOS DE BOTONES
// ========================================
.btn-sm {
    padding: 0.6rem 1.6rem;  // 6px 16px
    min-height: 3.6rem;      // 36px
    font-size: 1.4rem;       // 14px
}

.btn-lg {
    padding: 1.2rem 3.2rem;  // 12px 32px
    min-height: 5.6rem;      // 56px
    font-size: 1.8rem;       // 18px
}

// Bot√≥n de ancho completo
.btn-full {
    width: 100%;
}

// ========================================
// ‚è≥ ESTADO DE LOADING
// ========================================
.btn-loading {
    position: relative;
    color: transparent !important;
    pointer-events: none;
    
    &::after {
        content: "";
        position: absolute;
        width: 1.6rem;   // 16px
        height: 1.6rem;  // 16px
        top: 50%;
        left: 50%;
        margin-left: -0.8rem;  // -8px
        margin-top: -0.8rem;   // -8px
        border: 2px solid currentColor;
        border-radius: 50%;
        border-right-color: transparent;
        animation: btn-spin 0.6s linear infinite;
    }
}

@keyframes btn-spin {
    100% { transform: rotate(360deg); }
}

// ========================================
// üîó LINKS COMO BOTONES
// ========================================
a {
    font-family: map.get(variables.$fonts, "body");
    font-size: 1.6rem;
    font-weight: 500;
    text-decoration: none;
    color: map.get(variables.$colors, "secondary");
    transition: all map.get(variables.$transitions, "fast");
    
    &:hover {
        color: map.get(variables.$colors, "text-primary-accessible");
        text-decoration: underline;
    }
    
    &:focus-visible {
        outline: 2px solid map.get(variables.$colors, "link-accessible");
        outline-offset: 2px;
        border-radius: 2px;
    }
}

// ========================================
// üéØ BOT√ìN DROPDOWN
// ========================================
.dropdown-toggle {
    background: none;
    border: none;
    font-family: map.get(variables.$fonts, "body");
    font-size: 1.6rem;  // 16px
    font-weight: 500;
    color: map.get(variables.$colors, "secondary");
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.8rem;         // 8px
    padding: 0.8rem 1.6rem;  // 8px 16px
    border-radius: map.get(variables.$radius, "md");
    transition: all map.get(variables.$transitions, "fast");
    
    &:hover {
        background-color: rgba(map.get(variables.$colors, "primary"), 0.1);
        font-weight: 600;
    }
    
    &:focus-visible {
        outline: 2px solid map.get(variables.$colors, "text-primary-accessible");
        outline-offset: 2px;
    }
    
    // Icono de flecha
    &::after {
        content: "";
        width: 1.2rem;   // 12px
        height: 1.2rem;  // 12px
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23383d47"><path d="M8.12 9.29L12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7a.9959.9959 0 010-1.41c.39-.38 1.03-.39 1.42 0z"/></svg>');
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        transition: transform map.get(variables.$transitions, "fast");
    }
    
    &[aria-expanded="true"]::after {
        transform: rotate(180deg);
    }
}

// ========================================
// üì± RESPONSIVE
// ========================================
@include mixins.respond-to("mobile") {
    %button-base {
        padding: 0.6rem 1.6rem;  // 6px 16px
        font-size: 1.4rem;       // 14px
    }
    
    .btn-lg {
        padding: 1rem 2.4rem;    // 10px 24px
        font-size: 1.6rem;       // 16px
    }
}
