// ===========================================
// DASHBOARD PREMIUM - SVE (Sistema de Vigilancia Epidemiol√≥gica)
// Sprint 6 - Fase B - Tarea 8.A
// ===========================================

@use 'dashboard-tokens' as tokens;
@use "sass:color";

// =====================
// SVE PAGE HEADER
// =====================
.sve-header {
    @include tokens.flex-between;
    margin-bottom: tokens.$space-6;
    flex-wrap: wrap;
    gap: tokens.$space-4;

    &__title-group {
        flex: 1;
    }

    &__title {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h2;
        font-weight: tokens.$font-bold;
        color: tokens.$dashboard-secondary;
        margin: 0 0 tokens.$space-1 0;
    }

    &__subtitle {
        font-size: tokens.$font-body;
        color: tokens.$dashboard-text-light;
    }

    &__actions {
        display: flex;
        gap: tokens.$space-3;
    }
}

// =====================
// SVE PROGRAMS GRID
// =====================
.sve-programs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    gap: tokens.$space-6;
    margin-bottom: tokens.$space-8;
}

.sve-program-card {
    @include tokens.card-base;
    padding: 0;
    overflow: hidden;

    &__header {
        padding: tokens.$space-5;
        background: linear-gradient(135deg, tokens.$dashboard-primary 0%, color.adjust(tokens.$dashboard-primary, $lightness: -10%) 100%);
        color: tokens.$dashboard-secondary;
    }

    &__icon {
        width: 48px;
        height: 48px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: tokens.$radius-lg;
        @include tokens.flex-center;
        margin-bottom: tokens.$space-3;

        svg {
            width: 24px;
            height: 24px;
        }
    }

    &__title {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h4;
        font-weight: tokens.$font-bold;
        margin: 0 0 tokens.$space-1 0;
    }

    &__description {
        font-size: tokens.$font-small;
        opacity: 0.9;
    }

    &__body {
        padding: tokens.$space-5;
    }

    &__stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: tokens.$space-3;
        margin-bottom: tokens.$space-4;
    }

    &__stat {
        text-align: center;
        padding: tokens.$space-3;
        background: tokens.$dashboard-background;
        border-radius: tokens.$radius-md;

        &-value {
            font-family: tokens.$font-family-title;
            font-size: tokens.$font-h3;
            font-weight: tokens.$font-bold;
            color: tokens.$dashboard-secondary;
        }

        &-label {
            font-size: tokens.$font-xs;
            color: tokens.$dashboard-text-light;
            margin-top: tokens.$space-1;
        }

        &--highlight &-value {
            color: tokens.$dashboard-primary;
        }

        &--warning &-value {
            color: tokens.$dashboard-warning;
        }

        &--danger &-value {
            color: tokens.$dashboard-danger;
        }
    }

    &__progress {
        margin-bottom: tokens.$space-4;
    }

    &__progress-header {
        @include tokens.flex-between;
        margin-bottom: tokens.$space-2;
    }

    &__progress-label {
        font-size: tokens.$font-small;
        color: tokens.$dashboard-text-light;
    }

    &__progress-value {
        font-size: tokens.$font-small;
        font-weight: tokens.$font-semibold;
        color: tokens.$dashboard-secondary;
    }

    &__progress-bar {
        height: 8px;
        background: tokens.$dashboard-background;
        border-radius: tokens.$radius-full;
        overflow: hidden;
    }

    &__progress-fill {
        height: 100%;
        background: tokens.$dashboard-primary;
        border-radius: tokens.$radius-full;
        transition: width tokens.$transition-slow;

        &--success { background: tokens.$dashboard-success; }
        &--warning { background: tokens.$dashboard-warning; }
        &--danger { background: tokens.$dashboard-danger; }
    }

    &__actions {
        display: flex;
        gap: tokens.$space-2;
        padding-top: tokens.$space-3;
        border-top: 1px solid tokens.$header-border;
    }
}

// =====================
// SURVEILLANCE INDICATORS
// =====================
.sve-indicators {
    @include tokens.card-base;
    padding: tokens.$space-6;
    margin-bottom: tokens.$space-8;

    &__header {
        @include tokens.flex-between;
        margin-bottom: tokens.$space-6;
    }

    &__title {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h3;
        font-weight: tokens.$font-bold;
        color: tokens.$dashboard-secondary;
        margin: 0;
    }

    &__grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: tokens.$space-4;
    }
}

.indicator-card {
    padding: tokens.$space-4;
    background: tokens.$dashboard-background;
    border-radius: tokens.$radius-lg;
    border-left: 4px solid;

    &--success { border-left-color: tokens.$dashboard-success; }
    &--warning { border-left-color: tokens.$dashboard-warning; }
    &--danger { border-left-color: tokens.$dashboard-danger; }
    &--info { border-left-color: tokens.$dashboard-info; }

    &__name {
        font-size: tokens.$font-small;
        color: tokens.$dashboard-text-light;
        margin-bottom: tokens.$space-2;
    }

    &__value {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h2;
        font-weight: tokens.$font-bold;
        color: tokens.$dashboard-secondary;
    }

    &__unit {
        font-size: tokens.$font-small;
        color: tokens.$dashboard-text-light;
        font-weight: normal;
    }

    &__trend {
        display: flex;
        align-items: center;
        gap: tokens.$space-1;
        font-size: tokens.$font-xs;
        margin-top: tokens.$space-2;

        svg {
            width: 12px;
            height: 12px;
        }

        &--up {
            color: tokens.$dashboard-success;
        }

        &--down {
            color: tokens.$dashboard-danger;
        }
    }
}

// =====================
// CASE TRACKING
// =====================
.sve-cases {
    @include tokens.card-base;
    padding: 0;
    overflow: hidden;

    &__header {
        @include tokens.flex-between;
        padding: tokens.$space-4 tokens.$space-6;
        border-bottom: 1px solid tokens.$header-border;
    }

    &__title {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h4;
        font-weight: tokens.$font-semibold;
        color: tokens.$dashboard-secondary;
        margin: 0;
    }

    &__filters {
        display: flex;
        gap: tokens.$space-2;
    }

    &__list {
        max-height: 400px;
        overflow-y: auto;
        @include tokens.custom-scrollbar;
    }
}

.case-item {
    display: flex;
    align-items: center;
    gap: tokens.$space-4;
    padding: tokens.$space-4 tokens.$space-6;
    border-bottom: 1px solid tokens.$header-border;
    transition: background tokens.$transition-fast;

    &:last-child {
        border-bottom: none;
    }

    &:hover {
        background: rgba(tokens.$dashboard-primary, 0.02);
    }

    &__avatar {
        width: 40px;
        height: 40px;
        border-radius: tokens.$radius-md;
        background: tokens.$dashboard-primary;
        @include tokens.flex-center;
        font-weight: tokens.$font-bold;
        color: tokens.$dashboard-secondary;
        font-size: tokens.$font-small;
        flex-shrink: 0;
    }

    &__info {
        flex: 1;
        min-width: 0;
    }

    &__name {
        font-size: tokens.$font-body;
        font-weight: tokens.$font-medium;
        color: tokens.$dashboard-text;
        @include tokens.text-truncate;
    }

    &__meta {
        display: flex;
        gap: tokens.$space-3;
        font-size: tokens.$font-xs;
        color: tokens.$dashboard-text-light;
        margin-top: tokens.$space-1;
    }

    &__condition {
        font-size: tokens.$font-small;
        color: tokens.$dashboard-text;
    }

    &__status {
        flex-shrink: 0;
    }

    &__actions {
        display: flex;
        gap: tokens.$space-1;
    }
}

// =====================
// TIMELINE
// =====================
.sve-timeline {
    @include tokens.card-base;
    padding: tokens.$space-6;

    &__header {
        @include tokens.flex-between;
        margin-bottom: tokens.$space-4;
    }

    &__title {
        font-family: tokens.$font-family-title;
        font-size: tokens.$font-h4;
        font-weight: tokens.$font-semibold;
        color: tokens.$dashboard-secondary;
        margin: 0;
    }

    &__list {
        position: relative;
        padding-left: tokens.$space-8;

        &::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: tokens.$header-border;
        }
    }

    &__item {
        position: relative;
        padding-bottom: tokens.$space-4;

        &:last-child {
            padding-bottom: 0;
        }
    }

    &__dot {
        position: absolute;
        left: -29px;
        top: 0;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 2px solid tokens.$dashboard-white;
        z-index: 1;

        &--success { background: tokens.$dashboard-success; }
        &--warning { background: tokens.$dashboard-warning; }
        &--danger { background: tokens.$dashboard-danger; }
        &--info { background: tokens.$dashboard-info; }
        &--default { background: tokens.$dashboard-text-light; }
    }

    &__content {
        background: tokens.$dashboard-background;
        padding: tokens.$space-3;
        border-radius: tokens.$radius-md;
    }

    &__date {
        font-size: tokens.$font-xs;
        color: tokens.$dashboard-text-light;
        margin-bottom: tokens.$space-1;
    }

    &__text {
        font-size: tokens.$font-body;
        color: tokens.$dashboard-text;
    }

    &__user {
        font-size: tokens.$font-xs;
        color: tokens.$dashboard-text-light;
        margin-top: tokens.$space-2;
        font-style: italic;
    }
}

// =====================
// RESPONSIVE
// =====================
@include tokens.respond-to('laptop') {
    .sve-programs {
        grid-template-columns: repeat(2, 1fr);
    }
}

@include tokens.respond-to('tablet') {
    .sve-programs {
        grid-template-columns: 1fr;
    }

    .sve-program-card__stats {
        grid-template-columns: 1fr;
    }

    .sve-indicators__grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .case-item {
        flex-wrap: wrap;

        &__condition {
            width: 100%;
            margin-top: tokens.$space-2;
        }
    }
}

