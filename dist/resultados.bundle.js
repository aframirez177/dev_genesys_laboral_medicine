/*! For license information please see resultados.bundle.js.LICENSE.txt */
(()=>{var t={4633:(t,e,n)=>{var r=n(3738).default;function o(){"use strict";t.exports=o=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},a=Object.prototype,i=a.hasOwnProperty,c=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),i=new M(r||[]);return c(a,"_invoke",{value:_(t,n,i)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var m="suspendedStart",v="suspendedYield",g="executing",y="completed",w={};function b(){}function x(){}function C(){}var k={};f(k,l,(function(){return this}));var E=Object.getPrototypeOf,L=E&&E(E(B([])));L&&L!==a&&i.call(L,l)&&(k=L);var P=C.prototype=b.prototype=Object.create(k);function I(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,c,s){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(d).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,s)}))}s(l.arg)}var o;c(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}})}function _(t,n,r){var o=m;return function(a,i){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===w)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=p(t,n,r);if("normal"===l.type){if(o=r.done?y:v,l.arg===w)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,w;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,w):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function V(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return x.prototype=C,c(P,"constructor",{value:C,configurable:!0}),c(C,"constructor",{value:x,configurable:!0}),x.displayName=f(C,d,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,f(t,d,"GeneratorFunction")),t.prototype=Object.create(P),t},n.awrap=function(t){return{__await:t}},I(S.prototype),f(S.prototype,u,(function(){return this})),n.AsyncIterator=S,n.async=function(t,e,r,o,a){void 0===a&&(a=Promise);var i=new S(h(t,e,r,o),a);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},I(P),f(P,d,"Generator"),f(P,l,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=B,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(V),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),V(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;V(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),w}},n}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},3738:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4756:(t,e,n)=>{var r=n(4633)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var c=n(4756),s=n.n(c);function l(){console.log("🚀 Inicializando página de resultados premium...");var n=[{key:"matriz",name:"Matriz de Riesgos",icon:"📊",color:"#5dc4af",isFree:!1},{key:"profesiograma",name:"Profesiograma",icon:"🩺",color:"#383d47",isFree:!1},{key:"perfil",name:"Perfil de Cargo",icon:"👤",color:"#5dc4af",isFree:!1},{key:"cotizacion",name:"Cotización de Exámenes",icon:"💰",color:"#fff27d",isFree:!0}],r=document.getElementById("loader-container"),o=document.getElementById("results-container"),a=document.getElementById("error-container"),c=document.getElementById("documents-grid"),l=document.getElementById("cart-container"),u=document.getElementById("error-message");if(!(r&&o&&a&&c))return console.error("❌ Faltan elementos DOM esenciales"),void(document.body.innerHTML='<p style="padding:20px;color:red;">Error: Página no cargada correctamente.</p>');var d=new(function(){return i((function t(){var n=this;e(this,t),this.items=[],this.countElement=document.getElementById("cart-count"),this.totalElement=document.getElementById("cart-total"),this.payButton=document.getElementById("proceed-payment-btn"),this.payButton&&this.payButton.addEventListener("click",(function(){return n.handlePayment()}))}),[{key:"add",value:function(t,e,n){this.items.find((function(e){return e.key===t}))||(this.items.push({key:t,name:e,price:n}),this.updateUI(),console.log("🛒 Agregado al carrito: ".concat(e," - ").concat(this.formatCurrency(n))))}},{key:"remove",value:function(t){var e=this.items.find((function(e){return e.key===t}));this.items=this.items.filter((function(e){return e.key!==t})),this.updateUI(),console.log("🗑️ Removido del carrito: ".concat((null==e?void 0:e.name)||t))}},{key:"toggle",value:function(t,e,n){return this.items.find((function(e){return e.key===t}))?(this.remove(t),!1):(this.add(t,e,n),!0)}},{key:"getTotal",value:function(){return this.items.reduce((function(t,e){return t+e.price}),0)}},{key:"updateUI",value:function(){this.countElement&&(this.countElement.textContent=this.items.length),this.totalElement&&(this.totalElement.textContent=this.formatCurrency(this.getTotal())),l&&(l.style.display=this.items.length>0?"block":"none")}},{key:"formatCurrency",value:function(t){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}},{key:"handlePayment",value:function(){console.log("🛒 Iniciando pago con:",this.items),console.log("💰 Total:",this.getTotal()),alert("Función de pago en desarrollo.\n\nTotal: ".concat(this.formatCurrency(this.getTotal()),"\nDocumentos: ").concat(this.items.map((function(t){return t.name})).join(", ")))}}])}()),f=function(){return i((function t(n,r,o,a,i){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;e(this,t),this.config=n,this.url=r,this.thumbnailUrl=o,this.pricing=a,this.metadata=i,this.webViewUrl=c}),[{key:"render",value:function(){var t=this,e=document.createElement("div");e.className="document-card",e.dataset.key=this.config.key;var n="precio".concat(this.capitalize(this.config.key)),r=this.config.isFree?0:this.pricing[n]||0,o=Boolean(this.url),a=this.pricing.precioBase||3e4,i=this.pricing.numCargos||0;if(e.innerHTML='\n                \x3c!-- Barra superior con precio o "Gratis!" --\x3e\n                <div class="card-price-banner '.concat(this.config.isFree?"free":"paid",'">\n                    ').concat(this.config.isFree?'<span class="price-text">Gratis!</span>':'<span class="price-text">$'.concat(a.toLocaleString("es-CO")," X cargo</span>"),'\n                </div>\n\n                \x3c!-- Thumbnail del documento --\x3e\n                <div class="card-thumbnail-wrapper" ').concat(o?'data-url="'.concat(this.url,'"'):"",">\n                    ").concat(o&&this.thumbnailUrl?'<img src="'.concat(this.thumbnailUrl,'" alt="Preview ').concat(this.config.name,'" class="card-thumbnail-image" loading="lazy" onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'flex\';">\n                           <div class="card-thumbnail-fallback" style="display: none;">\n                               <span class="card-icon">').concat(this.config.icon,"</span>\n                           </div>"):'<div class="card-thumbnail-placeholder">\n                               <span class="card-icon">'.concat(this.config.icon,"</span>\n                           </div>"),"\n                    ").concat(o?'<div class="thumbnail-overlay">Vista Previa</div>':"",'\n                </div>\n\n                \x3c!-- Cuerpo de la tarjeta (solo datos esenciales) --\x3e\n                <div class="card-body">\n                    <h3 class="card-document-title">').concat(this.config.name,'</h3>\n\n                    \x3c!-- Información esencial --\x3e\n                    <div class="card-info-simple">\n                        <p class="card-company-name">').concat(this.metadata.nombreEmpresa||"N/A",'</p>\n                        <p class="card-cargos-count">').concat(i," cargo").concat(1!==i?"s":"",'</p>\n                    </div>\n\n                    \x3c!-- Iconos de acción --\x3e\n                    <div class="card-actions">\n                        ').concat(this.config.isFree?"":'\n                            <button class="btn-icon btn-cart" data-action="cart" title="Agregar al carrito" aria-label="Agregar al carrito">\n                                <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M2 2H10L15.36 28.78C15.5429 29.7008 16.0438 30.5279 16.7751 31.1166C17.5064 31.7053 18.4214 32.018 19.36 32H38.8C39.7386 32.018 40.6536 31.7053 41.3849 31.1166C42.1162 30.5279 42.6171 29.7008 42.8 28.78L46 12H12M20 42C20 43.1046 19.1046 44 18 44C16.8954 44 16 43.1046 16 42C16 40.8954 16.8954 40 18 40C19.1046 40 20 40.8954 20 42ZM42 42C42 43.1046 41.1046 44 40 44C38.8954 44 38 43.1046 38 42C38 40.8954 38.8954 40 40 40C41.1046 40 42 40.8954 42 42Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n                                </svg>\n                            </button>\n                        ',"\n                        ").concat(this.webViewUrl?'\n                            <button class="btn-icon btn-web-view" data-action="web-view" title="Ver en navegador" aria-label="Ver vista web interactiva">\n                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5ZM3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z" fill="currentColor"/>\n                                    <path d="M12 7C11.4477 7 11 7.44772 11 8V12C11 12.2652 11.1054 12.5196 11.2929 12.7071L13.2929 14.7071C13.6834 15.0976 14.3166 15.0976 14.7071 14.7071C15.0976 14.3166 15.0976 13.6834 14.7071 13.2929L13 11.5858V8C13 7.44772 12.5523 7 12 7Z" fill="currentColor"/>\n                                </svg>\n                            </button>\n                        ':"",'\n                        <button class="btn-icon btn-download" ').concat(o?"":"disabled",' data-action="download" title="Descargar" aria-label="Descargar documento">\n                            <svg width="20" height="20" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M28.5 38L16.625 26.125L19.95 22.6813L26.125 28.8563V9.5H30.875V28.8563L37.05 22.6813L40.375 26.125L28.5 38ZM14.25 47.5C12.9437 47.5 11.8255 47.0349 10.8953 46.1047C9.9651 45.1745 9.5 44.0563 9.5 42.75V35.625H14.25V42.75H42.75V35.625H47.5V42.75C47.5 44.0563 47.0349 45.1745 46.1047 46.1047C45.1745 47.0349 44.0563 47.5 42.75 47.5H14.25Z" fill="currentColor"/>\n                            </svg>\n                        </button>\n                        ').concat(this.config.isFree?"":'\n                            <div class="btn-icon btn-lock" title="Pago requerido" aria-label="Pago requerido">\n                                <svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M14 22V14C14 11.3478 15.0536 8.8043 16.9289 6.92893C18.8043 5.05357 21.3478 4 24 4C26.6522 4 29.1957 5.05357 31.0711 6.92893C32.9464 8.8043 34 11.3478 34 14V22M10 22H38C40.2091 22 42 23.7909 42 26V40C42 42.2091 40.2091 44 38 44H10C7.79086 44 6 42.2091 6 40V26C6 23.7909 7.79086 22 10 22Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n                                </svg>\n                            </div>\n                        ',"\n                    </div>\n                </div>\n            "),o){var c=e.querySelector(".card-thumbnail-wrapper");c.addEventListener("click",(function(){return t.openPreview()})),c.style.cursor="pointer"}var s=e.querySelector('[data-action="cart"]');s&&s.addEventListener("click",(function(e){e.stopPropagation();var n=d.toggle(t.config.key,t.config.name,r);s.classList.toggle("active",n)}));var l=e.querySelector('[data-action="download"]');l&&o&&l.addEventListener("click",(function(e){e.stopPropagation(),t.download()}));var u=e.querySelector('[data-action="web-view"]');return u&&this.webViewUrl&&u.addEventListener("click",(function(e){e.stopPropagation(),t.openWebView()})),e}},{key:"capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"formatCurrency",value:function(t){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}},{key:"openPreview",value:function(){this.url&&(console.log("👁️ Abriendo preview: ".concat(this.config.name)),window.open(this.url,"_blank","noopener,noreferrer"))}},{key:"openWebView",value:function(){this.webViewUrl&&(console.log("🌐 Abriendo vista web: ".concat(this.config.name)),window.open(this.webViewUrl,"_blank","noopener,noreferrer"))}},{key:"download",value:function(){if(this.url){console.log("⬇ Descargando: ".concat(this.config.name));var t=document.createElement("a");t.href=this.url;var e="matriz"===this.config.key?"xlsx":"pdf";t.download="".concat(this.config.key,".").concat(e),t.target="_blank",t.click()}}}])}(),h=!0;function p(t){console.log("✅ Mostrando resultados:",t),h&&(r.classList.remove("active"),o.classList.add("active"),a.classList.remove("active"));var e=t.metadata||{},i=document.getElementById("empresa-nombre"),s=document.getElementById("num-cargos"),l=document.getElementById("nombre-responsable"),u=document.getElementById("fecha-generacion");if(i&&(i.textContent=e.nombreEmpresa||"N/A"),s&&(s.textContent=e.numCargos||"0"),l&&(l.textContent=e.nombreResponsable||"N/A"),u&&e.fechaGeneracion){var d=new Date(e.fechaGeneracion);u.textContent=d.toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}h?(c.innerHTML="",n.forEach((function(n){var r,o=t.urls[n.key],a=(null===(r=t.thumbnails)||void 0===r?void 0:r[n.key])||null,i="profesiograma"===n.key&&t.urls.profesiogramaWebView?t.urls.profesiogramaWebView:null,s=new f(n,o,a,e.pricing||{},e,i).render();c.appendChild(s),console.log("📄 Tarjeta creada: ".concat(n.name," - URL: ").concat(o?"Disponible":"No disponible").concat(i?" (con vista web)":""))})),h=!1):console.log("ℹ️ Tarjetas ya renderizadas, omitiendo recarga")}function m(t){console.error("❌ Mostrando error:",t),r.classList.remove("active"),o.classList.remove("active"),a.classList.add("active"),u&&(u.textContent=t||"Ha ocurrido un error inesperado.")}var v=new URLSearchParams(window.location.search).get("token");if(v){console.log("🔑 Token encontrado:",v);var g=null;!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Generando tus documentos...";console.log("⏳ Mostrando loader:",t),r.classList.add("active"),o.classList.remove("active"),a.classList.remove("active");var e=r.querySelector("h1");e&&(e.textContent=t)}("Generando tus documentos..."),g=setInterval(y,5e3),y(),console.log("✅ Página de resultados premium inicializada correctamente")}else m("No se proporcionó un token de documento válido. Verifica la URL.");function y(){return w.apply(this,arguments)}function w(){var e;return e=s().mark((function t(){var e,n,r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("🔄 Polling status para token:",v),t.prev=1,e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3000":"",t.next=5,fetch("".concat(e,"/api/documentos/status/").concat(v));case 5:if(n=t.sent,console.log("📡 Response status:",n.status),n.ok){t.next=13;break}return t.next=10,n.text();case 10:throw r=t.sent,console.error("❌ Error ".concat(n.status,":"),r),new Error("Error del servidor: ".concat(n.status));case 13:return t.next=15,n.json();case 15:if(o=t.sent,console.log("📦 Data recibida:",o),!o.success){t.next=23;break}p(o),["pagado","completed","failed"].includes(o.status)?(console.log("✅ Estado final alcanzado: ".concat(o.status,". Deteniendo polling.")),clearInterval(g),"failed"===o.status&&m("La generación de documentos ha fallado. Por favor, contacta a soporte.")):console.log("⏳ Estado: ".concat(o.status,". Continuando polling...")),t.next=24;break;case 23:throw new Error(o.message||"Respuesta inválida del servidor.");case 24:t.next=31;break;case 26:t.prev=26,t.t0=t.catch(1),console.error("❌ Error fatal durante el sondeo:",t.t0),clearInterval(g),m("No se pudo verificar el estado: ".concat(t.t0.message,". Por favor, recarga la página."));case 31:case"end":return t.stop()}}),t,null,[[1,26]])})),w=function(){var n=this,r=arguments;return new Promise((function(o,a){var i=e.apply(n,r);function c(e){t(i,o,a,c,s,"next",e)}function s(e){t(i,o,a,c,s,"throw",e)}c(void 0)}))},w.apply(this,arguments)}}function u(){l()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u()})()})();