/*! For license information please see wizardExample.bundle.js.LICENSE.txt */
(()=>{var e={4633:(e,t,n)=>{var a=n(3738).default;function r(){"use strict";e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},o=Object.prototype,i=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,n){return e[t]=n}}function g(e,t,n,a){var r=t&&t.prototype instanceof x?t:x,o=Object.create(r.prototype),i=new _(a||[]);return s(o,"_invoke",{value:O(e,n,i)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=g;var v="suspendedStart",h="suspendedYield",f="executing",y="completed",b={};function x(){}function w(){}function S(){}var k={};p(k,l,(function(){return this}));var E=Object.getPrototypeOf,z=E&&E(E(P([])));z&&z!==o&&i.call(z,l)&&(k=z);var C=S.prototype=x.prototype=Object.create(k);function A(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(r,o,s,c){var l=m(e[r],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==a(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var r;s(this,"_invoke",{value:function(e,a){function o(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(o,o):o()}})}function O(e,n,a){var r=v;return function(o,i){if(r===f)throw Error("Generator is already running");if(r===y){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var s=a.delegate;if(s){var c=T(s,a);if(c){if(c===b)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===v)throw r=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var l=m(e,n,a);if("normal"===l.type){if(r=a.done?y:h,l.arg===b)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=y,a.method="throw",a.arg=l.arg)}}}function T(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),b;var o=m(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(a(e)+" is not iterable")}return w.prototype=S,s(C,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:w,configurable:!0}),w.displayName=p(S,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,p(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},A(j.prototype),p(j.prototype,d,(function(){return this})),n.AsyncIterator=j,n.async=function(e,t,a,r,o){void 0===o&&(o=Promise);var i=new j(g(e,t,a,r),o);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(C),p(C,u,"Generator"),p(C,l,(function(){return this})),p(C,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},n.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(a,r){return s.type="throw",s.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:P(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),b}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4756:(e,t,n)=>{var a=n(4633)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function a(e,n,a){return(n=t(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){s(o,a,r,i,c,"next",e)}function c(e){s(o,a,r,i,c,"throw",e)}i(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}function u(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=n(4756),g=n.n(p);function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const v=globalThis,h=v.trustedTypes,f=h?h.createPolicy("lit-html",{createHTML:e=>e}):void 0,y="$lit$",b=`lit$${Math.random().toFixed(9).slice(2)}$`,x="?"+b,w=`<${x}>`,S=document,k=()=>S.createComment(""),E=e=>null===e||"object"!=typeof e&&"function"!=typeof e,z=Array.isArray,C=e=>z(e)||"function"==typeof e?.[Symbol.iterator],A="[ \t\n\f\r]",j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,O=/-->/g,T=/>/g,N=RegExp(`>|${A}(?:([^\\s"'>=/]+)(${A}*=${A}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),I=/'/g,_=/"/g,P=/^(?:script|style|textarea|title)$/i,$=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),L=$(1),M=($(2),$(3),Symbol.for("lit-noChange")),B=Symbol.for("lit-nothing"),D=new WeakMap,q=S.createTreeWalker(S,129);function R(e,t){if(!z(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==f?f.createHTML(t):t}const H=(e,t)=>{const n=e.length-1,a=[];let r,o=2===t?"<svg>":3===t?"<math>":"",i=j;for(let t=0;t<n;t++){const n=e[t];let s,c,l=-1,d=0;for(;d<n.length&&(i.lastIndex=d,c=i.exec(n),null!==c);)d=i.lastIndex,i===j?"!--"===c[1]?i=O:void 0!==c[1]?i=T:void 0!==c[2]?(P.test(c[2])&&(r=RegExp("</"+c[2],"g")),i=N):void 0!==c[3]&&(i=N):i===N?">"===c[0]?(i=r??j,l=-1):void 0===c[1]?l=-2:(l=i.lastIndex-c[2].length,s=c[1],i=void 0===c[3]?N:'"'===c[3]?_:I):i===_||i===I?i=N:i===O||i===T?i=j:(i=N,r=void 0);const u=i===N&&e[t+1].startsWith("/>")?" ":"";o+=i===j?n+w:l>=0?(a.push(s),n.slice(0,l)+y+n.slice(l)+b+u):n+b+(-2===l?t:u)}return[R(e,o+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),a]};class V{constructor({strings:e,_$litType$:t},n){let a;this.parts=[];let r=0,o=0;const i=e.length-1,s=this.parts,[c,l]=H(e,t);if(this.el=V.createElement(c,n),q.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(a=q.nextNode())&&s.length<i;){if(1===a.nodeType){if(a.hasAttributes())for(const e of a.getAttributeNames())if(e.endsWith(y)){const t=l[o++],n=a.getAttribute(e).split(b),i=/([.?@])?(.*)/.exec(t);s.push({type:1,index:r,name:i[2],strings:n,ctor:"."===i[1]?K:"?"===i[1]?U:"@"===i[1]?Q:J}),a.removeAttribute(e)}else e.startsWith(b)&&(s.push({type:6,index:r}),a.removeAttribute(e));if(P.test(a.tagName)){const e=a.textContent.split(b),t=e.length-1;if(t>0){a.textContent=h?h.emptyScript:"";for(let n=0;n<t;n++)a.append(e[n],k()),q.nextNode(),s.push({type:2,index:++r});a.append(e[t],k())}}}else if(8===a.nodeType)if(a.data===x)s.push({type:2,index:r});else{let e=-1;for(;-1!==(e=a.data.indexOf(b,e+1));)s.push({type:7,index:r}),e+=b.length-1}r++}}static createElement(e,t){const n=S.createElement("template");return n.innerHTML=e,n}}function F(e,t,n=e,a){if(t===M)return t;let r=void 0!==a?n._$Co?.[a]:n._$Cl;const o=E(t)?void 0:t._$litDirective$;return r?.constructor!==o&&(r?._$AO?.(!1),void 0===o?r=void 0:(r=new o(e),r._$AT(e,n,a)),void 0!==a?(n._$Co??=[])[a]=r:n._$Cl=r),void 0!==r&&(t=F(e,r._$AS(e,t.values),r,a)),t}class G{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,a=(e?.creationScope??S).importNode(t,!0);q.currentNode=a;let r=q.nextNode(),o=0,i=0,s=n[0];for(;void 0!==s;){if(o===s.index){let t;2===s.type?t=new W(r,r.nextSibling,this,e):1===s.type?t=new s.ctor(r,s.name,s.strings,this,e):6===s.type&&(t=new Y(r,this,e)),this._$AV.push(t),s=n[++i]}o!==s?.index&&(r=q.nextNode(),o++)}return q.currentNode=S,a}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class W{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,a){this.type=2,this._$AH=B,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=a,this._$Cv=a?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=F(this,e,t),E(e)?e===B||null==e||""===e?(this._$AH!==B&&this._$AR(),this._$AH=B):e!==this._$AH&&e!==M&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):C(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==B&&E(this._$AH)?this._$AA.nextSibling.data=e:this.T(S.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,a="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=V.createElement(R(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===a)this._$AH.p(t);else{const e=new G(a,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=D.get(e.strings);return void 0===t&&D.set(e.strings,t=new V(e)),t}k(e){z(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,a=0;for(const r of e)a===t.length?t.push(n=new W(this.O(k()),this.O(k()),this,this.options)):n=t[a],n._$AI(r),a++;a<t.length&&(this._$AR(n&&n._$AB.nextSibling,a),t.length=a)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class J{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,a,r){this.type=1,this._$AH=B,this._$AN=void 0,this.element=e,this.name=t,this._$AM=a,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=B}_$AI(e,t=this,n,a){const r=this.strings;let o=!1;if(void 0===r)e=F(this,e,t,0),o=!E(e)||e!==this._$AH&&e!==M,o&&(this._$AH=e);else{const a=e;let i,s;for(e=r[0],i=0;i<r.length-1;i++)s=F(this,a[n+i],t,i),s===M&&(s=this._$AH[i]),o||=!E(s)||s!==this._$AH[i],s===B?e=B:e!==B&&(e+=(s??"")+r[i+1]),this._$AH[i]=s}o&&!a&&this.j(e)}j(e){e===B?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class K extends J{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===B?void 0:e}}class U extends J{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==B)}}class Q extends J{constructor(e,t,n,a,r){super(e,t,n,a,r),this.type=5}_$AI(e,t=this){if((e=F(this,e,t,0)??B)===M)return;const n=this._$AH,a=e===B&&n!==B||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==B&&(n===B||a);a&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class Y{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){F(this,e)}}const Z=v.litHtmlPolyfillSupport;Z?.(V,W),(v.litHtmlVersions??=[]).push("3.3.1");const X=(e,t,n)=>{const a=n?.renderBefore??t;let r=a._$litPart$;if(void 0===r){const e=n?.renderBefore??null;a._$litPart$=r=new W(t.insertBefore(k(),e),e,void 0,n??{})}return r._$AI(e),r};var ee,te,ne,ae,re,oe,ie;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(){return u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.steps=t,this.currentStep=0,this.data={},this.history=[],this.options=ce({container:n.container||document.body,onComplete:n.onComplete||function(){},onStepChange:n.onStepChange||function(){},enableKeyboardNavigation:!1!==n.enableKeyboardNavigation,showProgress:!1!==n.showProgress,autoFocus:!1!==n.autoFocus,animationDuration:n.animationDuration||400},n),this.isTransitioning=!1,this.keyboardHandler=null}),[{key:"init",value:function(){this.render(),this.options.enableKeyboardNavigation&&this.setupKeyboardNavigation();var e=this.steps[0];e.onEnter&&e.onEnter.call(this,this.data)}},{key:"next",value:(d=c(g().mark((function e(){var t,n,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("next() called, isTransitioning:",this.isTransitioning),!this.isTransitioning){e.next=3;break}return e.abrupt("return");case 3:return t=this.steps[this.currentStep],console.log("Processing step:",t.id),e.next=7,this.getCurrentStepData();case 7:return n=e.sent,e.next=10,this.validateCurrentStep(n);case 10:if((a=e.sent).isValid){e.next=14;break}return this.showValidationErrors(a.errors),e.abrupt("return");case 14:if(this.data[t.id]=n,this.history.push(this.currentStep),console.log("üìö Added to history. Current step:",this.currentStep,"History:",this.history),this.currentStep++,console.log("‚û°Ô∏è Moving to step:",this.currentStep),!(this.currentStep>=this.steps.length)){e.next=23;break}return e.next=22,this.complete();case 22:return e.abrupt("return");case 23:if(this.options.onStepChange(this.currentStep,this.steps[this.currentStep]),!(r=this.steps[this.currentStep]).onEnter){e.next=28;break}return e.next=28,r.onEnter.call(this,this.data);case 28:return e.next=30,this.renderWithAnimation("forward");case 30:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"back",value:(s=c(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("‚¨ÖÔ∏è back() called, isTransitioning:",this.isTransitioning,"history length:",this.history.length,"history:",this.history),!this.isTransitioning&&0!==this.history.length){e.next=4;break}return console.log("‚ùå Cannot go back. isTransitioning:",this.isTransitioning,"history empty:",0===this.history.length),e.abrupt("return");case 4:if(this.currentStep=this.history.pop(),console.log("Going back to step:",this.currentStep),this.options.onStepChange(this.currentStep,this.steps[this.currentStep]),!(t=this.steps[this.currentStep]).onEnter){e.next=11;break}return e.next=11,t.onEnter.call(this,this.data);case 11:return e.next=13,this.renderWithAnimation("backward");case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"goToStep",value:(i=c(g().mark((function e(t){var n,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0||t>=this.steps.length||t===this.currentStep)){e.next=2;break}return e.abrupt("return");case 2:if("forward"!=(n=t>this.currentStep?"forward":"backward")){e.next=18;break}a=this.currentStep;case 5:if(!(a<t)){e.next=18;break}return e.next=8,this.getStepData(a);case 8:return r=e.sent,e.next=11,this.validateStep(a,r);case 11:if(e.sent.isValid){e.next=15;break}return console.warn("Cannot skip to step ".concat(t,": validation failed at step ").concat(a)),e.abrupt("return");case 15:a++,e.next=5;break;case 18:return this.currentStep=t,this.options.onStepChange(this.currentStep,this.steps[this.currentStep]),e.next=22,this.renderWithAnimation(n);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"complete",value:(o=c(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isTransitioning=!0,this.renderLoadingState(),e.next=5,this.options.onComplete(this.data);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error completing wizard:",e.t0),this.showError("Ocurri√≥ un error al procesar sus datos. Por favor intente nuevamente.");case 11:return e.prev=11,this.isTransitioning=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,7,11,14]])}))),function(){return o.apply(this,arguments)})},{key:"getCurrentStepData",value:(r=c(g().mark((function e(){var t,n,a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.steps[this.currentStep]).getData||"function"!=typeof t.getData){e.next=5;break}return e.next=4,t.getData();case 4:return e.abrupt("return",e.sent);case 5:return n=this.options.container,a=n.querySelectorAll("input, textarea, select"),r={},a.forEach((function(e){e.name&&("checkbox"===e.type?r[e.name]=e.checked:"radio"===e.type?e.checked&&(r[e.name]=e.value):r[e.name]=e.value)})),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getStepData",value:(a=c(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.steps[t],e.abrupt("return",this.data[n.id]||{});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"validateCurrentStep",value:(n=c(g().mark((function e(t){var n,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.steps[this.currentStep]).validate||"function"!=typeof n.validate){e.next=5;break}return e.next=4,n.validate(t);case 4:return e.abrupt("return",e.sent);case 5:return a=[],this.options.container.querySelectorAll("[required]").forEach((function(e){e.value&&("checkbox"!==e.type||e.checked)||a.push({field:e.name||"unknown",message:"Este campo es requerido"})})),e.abrupt("return",{isValid:0===a.length,errors:a});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"validateStep",value:(t=c(g().mark((function e(t,n){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.steps[t]).validate){e.next=5;break}return e.next=4,a.validate(n);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",{isValid:!0,errors:[]});case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.steps[this.currentStep],n=(this.currentStep+1)/this.steps.length*100;console.log("Rendering step:",t.id,"with data:",this.data[t.id]);var a=L(ee||(ee=m(['\n      <div class="wizard-container" role="dialog" aria-labelledby="wizard-title">\n        ','\n\n        <div class="wizard-content" role="main">\n          <div class="wizard-step" data-step="','">\n            ','\n          </div>\n        </div>\n\n        <div class="wizard-actions" role="navigation">\n          ','\n\n          <button\n            type="button"\n            class="wizard-btn wizard-btn-next"\n            @click=',"\n            ?disabled=","\n          >\n            ",' ‚Üí\n          </button>\n        </div>\n\n        <div class="wizard-error" style="display: none;"></div>\n      </div>\n    '])),this.options.showProgress?this.renderProgress(n):"",this.currentStep,t.render?t.render(this.data[t.id]||{}):"",this.currentStep>0?L(te||(te=m(['\n            <button\n              type="button"\n              class="wizard-btn wizard-btn-back"\n              @click=',"\n              ?disabled=","\n            >\n              ‚Üê Atr√°s\n            </button>\n          "])),(function(){return e.back()}),this.isTransitioning):"",(function(){return e.next()}),this.isTransitioning,this.currentStep===this.steps.length-1?"Finalizar":"Siguiente");X(a,this.options.container),this.bindEventHandlers(),this.options.autoFocus&&setTimeout((function(){var t=e.options.container.querySelector("input, textarea, select");t&&t.focus()}),100)}},{key:"bindEventHandlers",value:function(){var e=this,t=this.options.container.querySelector(".wizard-btn-next"),n=this.options.container.querySelector(".wizard-btn-back");t&&(t.replaceWith(t.cloneNode(!0)),this.options.container.querySelector(".wizard-btn-next").addEventListener("click",(function(t){t.preventDefault(),console.log("Next button clicked (manual handler)"),e.next()})));n&&(n.replaceWith(n.cloneNode(!0)),this.options.container.querySelector(".wizard-btn-back").addEventListener("click",(function(t){t.preventDefault(),console.log("Back button clicked (manual handler)"),e.back()})))}},{key:"renderWithAnimation",value:(e=c(g().mark((function e(t){var n,a,r,o,i,s=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Starting animation:",t),this.isTransitioning=!0,n=this.options.container,a=n.querySelector(".wizard-content")){e.next=9;break}return console.log("No content found, rendering directly"),this.render(),this.isTransitioning=!1,e.abrupt("return");case 9:return a.classList.remove("slide-out-left","slide-out-right","slide-in-left","slide-in-right"),console.log("Cleaned previous animation classes"),r="forward"===t?"slide-out-left":"slide-out-right",a.classList.add(r),console.log("Added exit animation:",r),e.next=16,new Promise((function(e){return setTimeout(e,s.options.animationDuration/2)}));case 16:if(console.log("Rendering new content"),this.render(),o=n.querySelector(".wizard-content")){e.next=23;break}return console.error("ERROR: wizard-content not found after render!"),this.isTransitioning=!1,e.abrupt("return");case 23:return o.classList.remove("slide-out-left","slide-out-right","slide-in-left","slide-in-right"),i="forward"===t?"slide-in-right":"slide-in-left",o.classList.add(i),console.log("Added entry animation:",i),e.next=29,new Promise((function(e){return setTimeout(e,s.options.animationDuration/2)}));case 29:o.classList.remove("slide-in-right","slide-in-left"),console.log("Animation complete, classes removed"),this.isTransitioning=!1;case 32:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"renderProgress",value:function(e){var t=this;return L(ne||(ne=m(['\n      <div class="wizard-progress" role="progressbar" aria-valuenow="','" aria-valuemin="0" aria-valuemax="100">\n        <div class="wizard-progress-bar" style="width: ','%"></div>\n        <div class="wizard-progress-steps">\n          ',"\n        </div>\n      </div>\n    "])),e,e,this.steps.map((function(e,n){return L(ae||(ae=m(['\n            <div\n              class="wizard-progress-step '," ",'"\n              @click=','\n              role="button"\n              tabindex="','"\n              title="','"\n            >\n              ',"\n            </div>\n          "])),n===t.currentStep?"active":"",n<t.currentStep?"completed":"",(function(){return n<t.currentStep&&t.goToStep(n)}),n<t.currentStep?0:-1,e.title||"Paso ".concat(n+1),n<t.currentStep?L(re||(re=m(["<span>‚úì</span>"]))):L(oe||(oe=m(["<span>","</span>"])),n+1))})))}},{key:"renderLoadingState",value:function(){var e=L(ie||(ie=m(['\n      <div class="wizard-loading">\n        <div class="wizard-spinner"></div>\n        <p>Procesando sus datos...</p>\n      </div>\n    '])));X(e,this.options.container)}},{key:"showValidationErrors",value:function(e){var t=this.options.container.querySelector(".wizard-error");if(t&&0!==e.length){var n=e.map((function(e){return"‚Ä¢ ".concat(e.message)})).join("<br>");t.innerHTML='\n      <div class="error-content">\n        <strong>Por favor corrija los siguientes errores:</strong><br>\n        '.concat(n,"\n      </div>\n    "),t.style.display="block",setTimeout((function(){t.style.display="none"}),5e3),t.scrollIntoView({behavior:"smooth",block:"center"})}}},{key:"showError",value:function(e){this.showValidationErrors([{message:e}])}},{key:"setupKeyboardNavigation",value:function(){var e=this;this.keyboardHandler=function(t){"Enter"!==t.key||t.shiftKey||"TEXTAREA"===t.target.tagName||(t.preventDefault(),e.next()),"Escape"===t.key&&e.currentStep>0&&(t.preventDefault(),e.back())},document.addEventListener("keydown",this.keyboardHandler)}},{key:"destroy",value:function(){this.keyboardHandler&&document.removeEventListener("keydown",this.keyboardHandler),this.options.container.innerHTML=""}},{key:"getState",value:function(){return{currentStep:this.currentStep,data:ce({},this.data),progress:(this.currentStep+1)/this.steps.length*100,canGoBack:this.history.length>0,canGoNext:this.currentStep<this.steps.length-1}}},{key:"setState",value:function(e){e.data&&(this.data=ce({},e.data)),"number"==typeof e.currentStep&&(this.currentStep=Math.min(e.currentStep,this.steps.length-1)),this.render()}}]);var e,t,n,a,r,o,i,s,d}();function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=o.call(n)).done)&&(s.push(a.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(){return u((function e(){l(this,e),this.state={empresa:{nombre:"",nit:"",sector:"",region:""},cargos:[],currentCargoIndex:0,isSubmitting:!1,lastSaved:null},this.listeners=new Map,this.listenerIdCounter=0}),[{key:"getState",value:function(){return pe({},this.state)}},{key:"getEmpresa",value:function(){return pe({},this.state.empresa)}},{key:"updateEmpresa",value:function(e){this.state.empresa=pe(pe({},this.state.empresa),e),this.notify("empresa",this.state.empresa)}},{key:"getCargos",value:function(){return i(this.state.cargos)}},{key:"getCargo",value:function(e){return e<0||e>=this.state.cargos.length?null:pe({},this.state.cargos[e])}},{key:"addCargo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=pe(pe({},{id:Date.now(),cargoName:"",area:"",zona:"",numTrabajadores:1,descripcionTareas:"",tareasRutinarias:!1,manipulaAlimentos:!1,trabajaAlturas:!1,trabajaEspaciosConfinados:!1,conduceVehiculo:!1,gesSeleccionados:[]}),e);return this.state.cargos.push(t),this.notify("cargos",this.state.cargos),t}},{key:"updateCargo",value:function(e,t){return e<0||e>=this.state.cargos.length?(console.warn("Cannot update cargo at index ".concat(e,": out of bounds")),!1):(this.state.cargos[e]=pe(pe({},this.state.cargos[e]),t),this.notify("cargos",this.state.cargos),this.notify("cargo-".concat(e),this.state.cargos[e]),!0)}},{key:"removeCargo",value:function(e){return e<0||e>=this.state.cargos.length?(console.warn("Cannot remove cargo at index ".concat(e,": out of bounds")),!1):(this.state.cargos.splice(e,1),this.notify("cargos",this.state.cargos),!0)}},{key:"addGESToCargo",value:function(e,t){var n=this.state.cargos[e];if(!n)return console.warn("Cannot add GES: cargo ".concat(e," not found")),!1;var a=n.gesSeleccionados.some((function(e){return e.riesgo===t.riesgo&&e.ges===t.ges}));return a?(console.warn("GES already exists in cargo ".concat(e)),!1):(n.gesSeleccionados.push(t),this.notify("cargos",this.state.cargos),this.notify("cargo-".concat(e),n),!0)}},{key:"updateGESInCargo",value:function(e,t,n){var a=this.state.cargos[e];return a&&a.gesSeleccionados[t]?(a.gesSeleccionados[t]=pe(pe({},a.gesSeleccionados[t]),n),this.notify("cargos",this.state.cargos),this.notify("cargo-".concat(e),a),!0):(console.warn("Cannot update GES: invalid indices"),!1)}},{key:"removeGESFromCargo",value:function(e,t){var n=this.state.cargos[e];return n&&n.gesSeleccionados[t]?(n.gesSeleccionados.splice(t,1),this.notify("cargos",this.state.cargos),this.notify("cargo-".concat(e),n),!0):(console.warn("Cannot remove GES: invalid indices"),!1)}},{key:"setCurrentCargoIndex",value:function(e){e>=0&&e<this.state.cargos.length&&(this.state.currentCargoIndex=e,this.notify("currentCargoIndex",e))}},{key:"getCurrentCargoIndex",value:function(){return this.state.currentCargoIndex}},{key:"setSubmitting",value:function(e){this.state.isSubmitting=e,this.notify("isSubmitting",e)}},{key:"markAsSaved",value:function(){this.state.lastSaved=new Date,this.notify("lastSaved",this.state.lastSaved)}},{key:"reset",value:function(){this.state={empresa:{nombre:"",nit:"",sector:"",region:""},cargos:[],currentCargoIndex:0,isSubmitting:!1,lastSaved:null},this.notify("reset",this.state)}},{key:"loadState",value:function(t){return!(!t||"object"!==e(t))&&(this.state=pe(pe(pe({},this.state),t),{},{lastSaved:t.lastSaved?new Date(t.lastSaved):null}),this.notify("loaded",this.state),!0)}},{key:"subscribe",value:function(e,t){var n=this;if("function"!=typeof t)throw new Error("Callback must be a function");var a=this.listenerIdCounter++;return this.listeners.has(e)||this.listeners.set(e,new Map),this.listeners.get(e).set(a,t),function(){return n.unsubscribe(e,a)}}},{key:"unsubscribe",value:function(e,t){var n=this.listeners.get(e);n&&n.delete(t)}},{key:"notify",value:function(e,t){var n=this.listeners.get(e);n&&n.forEach((function(n){try{n(t)}catch(t){console.error('Error in listener for event "'.concat(e,'":'),t)}}));var a=this.listeners.get("*");a&&a.forEach((function(n){try{n({event:e,data:t})}catch(e){console.error("Error in global listener:",e)}}))}},{key:"getStats",value:function(){var e=this.state.cargos.length;return{totalCargos:e,totalTrabajadores:this.state.cargos.reduce((function(e,t){return e+(parseInt(t.numTrabajadores)||0)}),0),totalRiesgos:this.state.cargos.reduce((function(e,t){return e+t.gesSeleccionados.length}),0),hasEmpresa:Boolean(this.state.empresa.nombre&&this.state.empresa.nit),isComplete:e>0&&this.state.empresa.nombre&&this.state.empresa.nit}}},{key:"validate",value:function(){var e=[];return this.state.empresa.nombre||e.push({field:"empresa.nombre",message:"El nombre de la empresa es requerido"}),this.state.empresa.nit||e.push({field:"empresa.nit",message:"El NIT es requerido"}),0===this.state.cargos.length&&e.push({field:"cargos",message:"Debe agregar al menos un cargo"}),this.state.cargos.forEach((function(t,n){t.cargoName||e.push({field:"cargos.".concat(n,".cargoName"),message:"Cargo ".concat(n+1,": El nombre del cargo es requerido")}),t.area||e.push({field:"cargos.".concat(n,".area"),message:"Cargo ".concat(n+1,": El √°rea es requerida")}),0===t.gesSeleccionados.length&&e.push({field:"cargos.".concat(n,".gesSeleccionados"),message:"Cargo ".concat(n+1,": Debe seleccionar al menos un riesgo")})})),{isValid:0===e.length,errors:e}}}])}(),me=new ge,ve={Mec√°nico:{color:"#2196F3",items:["Ca√≠das al mismo nivel","Ca√≠das de altura","Posibilidad de atrapamiento","Posibilidad de ser golpeado por objetos que caen o en movimiento","Posibilidad de proyecci√≥n de part√≠culas o fluidos a presi√≥n","Posibilidad de perforaci√≥n o de punzonamiento","Posibilidad de corte o seccionamiento"]},El√©ctrico:{color:"#FFEB3B",items:["Alta tensi√≥n debido a instalaciones el√©ctricas locativas y est√°ticas","Media tensi√≥n debido a instalaciones el√©ctricas locativas y est√°ticas","Baja tensi√≥n debido a instalaciones el√©ctricas locativas y est√°ticas","Electricidad est√°tica"]},F√≠sico:{color:"#FF9800",items:["Iluminaci√≥n deficiente","Iluminaci√≥n en exceso","Presiones anormales","Radiaciones ionizantes","Radiaciones no ionizantes","Radiaciones por equipos audiovisuales","Ruido","Temperaturas extremas: calor","Temperaturas extremas: fr√≠o","Vibraciones mano-cuerpo","Vibraciones cuerpo completo","Cambios bruscos de temperatura","Humedad Relativa (Vapor de agua)"]},Qu√≠mico:{color:"#9C27B0",items:["Exposici√≥n a gases vapores humos polvos no t√≥xicos","Exposici√≥n a gases vapores humos polvos t√≥xicos","Exposici√≥n sustancias qu√≠micas l√≠quidas t√≥xicas","Exposici√≥n sustancias qu√≠micas l√≠quidas no t√≥xicas","Exposici√≥n a sustancias qu√≠micas que generan efectos en el organismo"]},Biol√≥gico:{color:"#4CAF50",items:["Presencia de animales/vectores transmisores de enfermedad","Exposici√≥n a material contaminado o con riesgo biol√≥gico","Manipulaci√≥n de alimentos","Exposici√≥n a microorganismos","Exposici√≥n a Virus","Exposici√≥n a Bacterias"]},Biomec√°nico:{color:"#F44336",items:["Manejo de cargas mayores a 25 Kg (Hombres)","Manejo de cargas mayores a 12.5 Kg (Mujeres)","Adopci√≥n de posturas nocivas","Movimientos repetitivos (6 o m√°s por minuto)","Dise√±o del puesto de trabajo inadecuado","Posturas prolongadas y/o incorrectas"]},"Factores Humanos":{color:"#795548",items:["Competencias no definidas para el cargo","Actos inseguros observados"]},Psicosocial:{color:"#E91E63",items:["Atenci√≥n de p√∫blico","Monoton√≠a/repetitividad de funciones","Trabajo bajo presi√≥n"]},Locativo:{color:"#607D8B",items:["Almacenamiento inadecuado","Condiciones inadecuadas de orden y aseo","Condiciones del piso","Escaleras y barandas inadecuadas o mal estado","Condiciones de las instalaciones"]},Natural:{color:"#8BC34A",items:["Deslizamientos","Inundaci√≥n","Sismo - Terremotos","Tormentas el√©ctricas","Lluvias granizadas"]},Seguridad:{color:"#FF5722",items:["Secuestros","Amenazas","Hurtos - Robos - Atracos","Accidente de Tr√°nsito","Desorden p√∫blico - Atentados","Extorsi√≥n"]},"Otros Riesgos":{color:"#673AB7",items:["Trabajos en caliente","Explosi√≥n","Incendio"]},"Saneamiento B√°sico":{color:"#00BCD4",items:["Sin disponibilidad de agua potable"]},"Salud P√∫blica":{color:"#009688",items:["Enfermedades end√©micas","Mordedura y Picadura de Animales"]}};var he,fe,ye,be,xe,we,Se,ke,Ee,ze,Ce,Ae,je,Oe,Te,Ne,Ie=[{value:"agricultura",label:"Agricultura, ganader√≠a, caza y silvicultura"},{value:"pesca",label:"Pesca"},{value:"mineria",label:"Explotaci√≥n de minas y canteras"},{value:"manufactura",label:"Industrias manufactureras"},{value:"electricidad",label:"Suministro de electricidad, gas y agua"},{value:"construccion",label:"Construcci√≥n"},{value:"comercio",label:"Comercio al por mayor y al por menor"},{value:"hoteles",label:"Hoteles y restaurantes"},{value:"transporte",label:"Transporte, almacenamiento y comunicaciones"},{value:"financiero",label:"Intermediaci√≥n financiera"},{value:"inmobiliario",label:"Actividades inmobiliarias, empresariales y de alquiler"},{value:"administracion",label:"Administraci√≥n p√∫blica y defensa"},{value:"educacion",label:"Educaci√≥n"},{value:"salud",label:"Servicios sociales y de salud"},{value:"servicios-comunitarios",label:"Otras actividades de servicios comunitarios, sociales y personales"},{value:"servicios-domesticos",label:"Hogares privados con servicio dom√©stico"},{value:"tecnologia",label:"Tecnolog√≠a e inform√°tica"},{value:"telecomunicaciones",label:"Telecomunicaciones"},{value:"servicios-profesionales",label:"Actividades profesionales, cient√≠ficas y t√©cnicas"},{value:"entretenimiento",label:"Actividades art√≠sticas, de entretenimiento y recreaci√≥n"},{value:"otro",label:"Otro sector"}],_e=[{value:"Leticia",departamento:"Amazonas"},{value:"Medell√≠n",departamento:"Antioquia"},{value:"Envigado",departamento:"Antioquia"},{value:"Itag√º√≠",departamento:"Antioquia"},{value:"Bello",departamento:"Antioquia"},{value:"Rionegro",departamento:"Antioquia"},{value:"Sabaneta",departamento:"Antioquia"},{value:"Arauca",departamento:"Arauca"},{value:"Barranquilla",departamento:"Atl√°ntico"},{value:"Soledad",departamento:"Atl√°ntico"},{value:"Malambo",departamento:"Atl√°ntico"},{value:"Puerto Colombia",departamento:"Atl√°ntico"},{value:"Bogot√°",departamento:"Bogot√° D.C."},{value:"Cartagena",departamento:"Bol√≠var"},{value:"Magangu√©",departamento:"Bol√≠var"},{value:"Turbaco",departamento:"Bol√≠var"},{value:"Tunja",departamento:"Boyac√°"},{value:"Duitama",departamento:"Boyac√°"},{value:"Sogamoso",departamento:"Boyac√°"},{value:"Manizales",departamento:"Caldas"},{value:"La Dorada",departamento:"Caldas"},{value:"Florencia",departamento:"Caquet√°"},{value:"Yopal",departamento:"Casanare"},{value:"Popay√°n",departamento:"Cauca"},{value:"Santander de Quilichao",departamento:"Cauca"},{value:"Valledupar",departamento:"Cesar"},{value:"Aguachica",departamento:"Cesar"},{value:"Quibd√≥",departamento:"Choc√≥"},{value:"Monter√≠a",departamento:"C√≥rdoba"},{value:"Ceret√©",departamento:"C√≥rdoba"},{value:"Lorica",departamento:"C√≥rdoba"},{value:"Soacha",departamento:"Cundinamarca"},{value:"Ch√≠a",departamento:"Cundinamarca"},{value:"Zipaquir√°",departamento:"Cundinamarca"},{value:"Facatativ√°",departamento:"Cundinamarca"},{value:"Fusagasug√°",departamento:"Cundinamarca"},{value:"Girardot",departamento:"Cundinamarca"},{value:"Cajic√°",departamento:"Cundinamarca"},{value:"Madrid",departamento:"Cundinamarca"},{value:"Mosquera",departamento:"Cundinamarca"},{value:"Funza",departamento:"Cundinamarca"},{value:"In√≠rida",departamento:"Guain√≠a"},{value:"San Jos√© del Guaviare",departamento:"Guaviare"},{value:"Neiva",departamento:"Huila"},{value:"Pitalito",departamento:"Huila"},{value:"Riohacha",departamento:"La Guajira"},{value:"Maicao",departamento:"La Guajira"},{value:"Santa Marta",departamento:"Magdalena"},{value:"Ci√©naga",departamento:"Magdalena"},{value:"Villavicencio",departamento:"Meta"},{value:"Acac√≠as",departamento:"Meta"},{value:"Granada",departamento:"Meta"},{value:"Pasto",departamento:"Nari√±o"},{value:"Tumaco",departamento:"Nari√±o"},{value:"Ipiales",departamento:"Nari√±o"},{value:"C√∫cuta",departamento:"Norte de Santander"},{value:"Oca√±a",departamento:"Norte de Santander"},{value:"Pamplona",departamento:"Norte de Santander"},{value:"Villa del Rosario",departamento:"Norte de Santander"},{value:"Mocoa",departamento:"Putumayo"},{value:"Armenia",departamento:"Quind√≠o"},{value:"Calarc√°",departamento:"Quind√≠o"},{value:"Pereira",departamento:"Risaralda"},{value:"Dosquebradas",departamento:"Risaralda"},{value:"Santa Rosa de Cabal",departamento:"Risaralda"},{value:"San Andr√©s",departamento:"San Andr√©s y Providencia"},{value:"Bucaramanga",departamento:"Santander"},{value:"Floridablanca",departamento:"Santander"},{value:"Gir√≥n",departamento:"Santander"},{value:"Piedecuesta",departamento:"Santander"},{value:"Barrancabermeja",departamento:"Santander"},{value:"San Gil",departamento:"Santander"},{value:"Sincelejo",departamento:"Sucre"},{value:"Ibagu√©",departamento:"Tolima"},{value:"Espinal",departamento:"Tolima"},{value:"Cali",departamento:"Valle del Cauca"},{value:"Palmira",departamento:"Valle del Cauca"},{value:"Buenaventura",departamento:"Valle del Cauca"},{value:"Tulu√°",departamento:"Valle del Cauca"},{value:"Cartago",departamento:"Valle del Cauca"},{value:"Buga",departamento:"Valle del Cauca"},{value:"Jamund√≠",departamento:"Valle del Cauca"},{value:"Yumbo",departamento:"Valle del Cauca"},{value:"Mit√∫",departamento:"Vaup√©s"},{value:"Puerto Carre√±o",departamento:"Vichada"}];function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){return Me.apply(this,arguments)}function Me(){return Me=c(g().mark((function e(t){var n,a,r,o=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,e.prev=1,a=n?{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}:{method:"GET"},e.next=5,fetch("/api/ia".concat(t),a);case 5:if((r=e.sent).ok){e.next=8;break}throw new Error("Error ".concat(r.status,": ").concat(r.statusText));case 8:return e.next=10,r.json();case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(1),console.error("Error en endpoint ".concat(t,":"),e.t0),e.abrupt("return",{success:!1,error:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Me.apply(this,arguments)}var Be={ges:{},controls:{}},De={id:"welcome",title:"Bienvenido al Diagn√≥stico de Riesgos Laborales",render:function(){return L(he||(he=m(['\n    <h2>üëã ¬°Bienvenido al Diagn√≥stico de Riesgos Laborales!</h2>\n    <p>\n      Este asistente te guiar√° paso a paso para crear la matriz de riesgos profesionales\n      de tu empresa seg√∫n la metodolog√≠a GTC 45.\n    </p>\n\n    <div class="wizard-hint">\n      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n        <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n      </svg>\n      <span>\n        Este proceso tomar√° aproximadamente <strong>5-10 minutos</strong> dependiendo\n        del n√∫mero de cargos a evaluar.\n      </span>\n    </div>\n\n    <div class="wizard-options">\n      <div class="wizard-option" style="text-align: left;">\n        <div class="option-icon">‚ú®</div>\n        <div class="option-label">Sugerencias Inteligentes</div>\n        <div class="option-description">\n          Recibir√°s recomendaciones autom√°ticas basadas en tu sector y cargos\n        </div>\n      </div>\n\n      <div class="wizard-option" style="text-align: left;">\n        <div class="option-icon">üíæ</div>\n        <div class="option-label">Auto-guardado</div>\n        <div class="option-description">\n          Tu progreso se guarda autom√°ticamente cada 5 segundos\n        </div>\n      </div>\n\n      <div class="wizard-option" style="text-align: left;">\n        <div class="option-icon">üìä</div>\n        <div class="option-label">Documentos Profesionales</div>\n        <div class="option-description">\n          Al finalizar obtendr√°s matriz, profesiograma y perfiles de cargo\n        </div>\n      </div>\n    </div>\n  '])))},validate:function(){return{isValid:!0,errors:[]}}},qe={id:"empresa",title:"Informaci√≥n de la Empresa",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(fe||(fe=m(['\n    <h2>üìã Informaci√≥n de la Empresa</h2>\n    <p>Cu√©ntanos sobre tu empresa para personalizar el diagn√≥stico.</p>\n\n    <div style="display: flex; flex-direction: column; gap: 2rem; margin-top: 3rem;">\n      <div>\n        <label for="empresa-nombre" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n          Nombre de la empresa *\n        </label>\n        <input\n          type="text"\n          id="empresa-nombre"\n          name="nombre"\n          placeholder="Ej: ACME Corporation S.A.S"\n          value="','"\n          required\n        />\n      </div>\n\n      <div>\n        <label for="empresa-nit" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n          NIT *\n        </label>\n        <input\n          type="text"\n          id="empresa-nit"\n          name="nit"\n          placeholder="Ej: 900123456-7"\n          value="','"\n          required\n        />\n      </div>\n\n      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">\n        <div>\n          <label for="empresa-sector" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Sector Econ√≥mico *\n          </label>\n          <select id="empresa-sector" name="sector" required>\n            <option value="">Seleccione el sector...</option>\n            ','\n          </select>\n        </div>\n\n        <div>\n          <label for="empresa-ciudad" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Ciudad *\n          </label>\n          <input\n            type="text"\n            id="empresa-ciudad"\n            name="ciudad"\n            placeholder="Ej: Bogot√°"\n            value="','"\n            required\n            list="ciudades-list"\n          />\n          <datalist id="ciudades-list">\n            ','\n          </datalist>\n        </div>\n      </div>\n    </div>\n\n    <div class="wizard-hint" style="margin-top: 3rem;">\n      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n        <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n      </svg>\n      <span>\n        Esta informaci√≥n aparecer√° en todos los documentos generados.\n      </span>\n    </div>\n  '])),e.nombre||"",e.nit||"",Ie.map((function(t){return L(ye||(ye=m(['\n              <option value="','" ?selected=',">\n                ","\n              </option>\n            "])),t.value,e.sector===t.value,t.label)})),e.ciudad||"",_e.map((function(e){return e.value})).sort().map((function(e){return'<option value="'.concat(e,'">')})).join(""))},validate:function(e){var t=[];return(!e.nombre||e.nombre.trim().length<3)&&t.push({field:"nombre",message:"El nombre de la empresa debe tener al menos 3 caracteres"}),(!e.nit||e.nit.trim().length<5)&&t.push({field:"nit",message:"El NIT debe tener al menos 5 caracteres"}),e.sector||t.push({field:"sector",message:"Debe seleccionar un sector"}),(!e.ciudad||e.ciudad.trim().length<2)&&t.push({field:"ciudad",message:"Debe ingresar una ciudad"}),{isValid:0===t.length,errors:t}},onEnter:function(e){var t=me.getState();t.empresa&&t.empresa.nombre}},Re={id:"numCargos",title:"¬øCu√°ntos cargos evaluar√°s?",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(be||(be=m(['\n    <h2>üë• ¬øCu√°ntos cargos diferentes evaluar√°s?</h2>\n    <p>Indica el n√∫mero de posiciones o cargos distintos que tiene tu empresa.</p>\n\n    <div style="margin-top: 4rem;">\n      <input\n        type="number"\n        id="num-cargos"\n        name="numCargos"\n        placeholder="Ej: 5"\n        min="1"\n        max="50"\n        value="','"\n        required\n        style="text-align: center; font-size: 3.6rem; font-weight: 700;"\n      />\n    </div>\n\n    <div class="wizard-hint" style="margin-top: 3rem;">\n      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n        <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n      </svg>\n      <span>\n        Por ejemplo: Operario, Supervisor, Gerente, Contador, etc.\n        Si tienes 10 operarios, cuenta solo 1 cargo (Operario).\n      </span>\n    </div>\n\n    <div class="wizard-options" style="margin-top: 3rem;">\n      <div class="wizard-option" data-num="2">\n        <div class="option-icon">üè¢</div>\n        <div class="option-label" style="line-height: 1.6;">\n          <span class="green">Peque√±as empresas</span><br>\n          <span style="font-size: 1.3rem; font-weight: 400;">tienen entre 1 y 3 cargos</span>\n        </div>\n      </div>\n\n      <div class="wizard-option" data-num="7">\n        <div class="option-icon">üè≠</div>\n        <div class="option-label" style="line-height: 1.6;">\n          <span class="green">Medianas empresas</span><br>\n          <span style="font-size: 1.3rem; font-weight: 400;">tienen entre 4 y 10 cargos</span>\n        </div>\n      </div>\n\n      <div class="wizard-option" data-num="15">\n        <div class="option-icon">üèôÔ∏è</div>\n        <div class="option-label" style="line-height: 1.6;">\n          <span class="green">Grandes empresas</span><br>\n          <span style="font-size: 1.3rem; font-weight: 400;">tienen 11 o m√°s cargos</span>\n        </div>\n      </div>\n    </div>\n  '])),e.numCargos||"")},validate:function(e){var t=[],n=parseInt(e.numCargos,10);return(!n||n<1)&&t.push({field:"numCargos",message:"Debe indicar al menos 1 cargo"}),n>50&&t.push({field:"numCargos",message:"El m√°ximo de cargos soportado es 50. Contacta con soporte para empresas grandes."}),{isValid:0===t.length,errors:t}},onEnter:function(){setTimeout((function(){var e=document.querySelectorAll(".wizard-option[data-num]"),t=document.getElementById("num-cargos");e.forEach((function(n){n.addEventListener("click",(function(){var a=n.dataset.num;t.value=a,e.forEach((function(e){return e.classList.remove("selected")})),n.classList.add("selected")}))}))}),100)}};function He(e,t){return{id:"cargo-info-".concat(e),title:"Cargo ".concat(e+1," de ").concat(t),render:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(xe||(xe=m(["\n      <h2>üè¢ Cargo "," de ",'</h2>\n      <p>Ingresa los detalles del cargo que deseas evaluar.</p>\n\n      <div style="display: flex; flex-direction: column; gap: 2rem; margin-top: 3rem;">\n        <div>\n          <label for="cargo-name" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Nombre del cargo *\n          </label>\n          <input\n            type="text"\n            id="cargo-name"\n            name="cargoName"\n            placeholder="Ej: Operario de producci√≥n"\n            value="','"\n            required\n            autocomplete="off"\n          />\n          <div id="autocomplete-suggestions" class="ai-suggestions" style="display: none; margin-top: 1rem;">\n            \x3c!-- Sugerencias de autocompletado aparecer√°n aqu√≠ --\x3e\n          </div>\n        </div>\n\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">\n          <div>\n            <label for="cargo-area" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n              √Årea *\n            </label>\n            <input\n              type="text"\n              id="cargo-area"\n              name="area"\n              placeholder="Ej: Producci√≥n"\n              value="','"\n              required\n            />\n          </div>\n\n          <div>\n            <label for="cargo-zona" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n              Zona *\n            </label>\n            <input\n              type="text"\n              id="cargo-zona"\n              name="zona"\n              placeholder="Ej: Planta 1, Oficina Principal"\n              value="','"\n              required\n            />\n          </div>\n        </div>\n\n        <div>\n          <label for="cargo-num-trabajadores" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            N¬∞ de trabajadores *\n          </label>\n          <input\n            type="number"\n            id="cargo-num-trabajadores"\n            name="numTrabajadores"\n            placeholder="Ej: 15"\n            min="1"\n            value="','"\n            required\n            style="max-width: 200px;"\n          />\n        </div>\n\n        <div>\n          <label for="cargo-descripcion-tareas" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Descripci√≥n de tareas *\n          </label>\n          <textarea\n            id="cargo-descripcion-tareas"\n            name="descripcionTareas"\n            placeholder="Describe las principales tareas y responsabilidades del cargo (m√≠nimo 20 caracteres)"\n            rows="4"\n            required\n          >','</textarea>\n          <p style="font-size: 1.3rem; color: #666; margin-top: 0.5rem;">\n            Ejemplo: "Opera m√°quinas de corte, realiza inspecci√≥n de calidad, mantiene el √°rea de trabajo limpia y ordenada"\n          </p>\n        </div>\n      </div>\n\n      <div class="wizard-hint" style="margin-top: 3rem;">\n        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n        </svg>\n        <span>\n          Comienza a escribir el nombre del cargo y recibir√°s sugerencias autom√°ticas.\n        </span>\n      </div>\n    '])),e+1,t,n.cargoName||"",n.area||"",n.zona||"",n.numTrabajadores||"",n.descripcionTareas||"")},validate:function(e){var t=[];(!e.cargoName||e.cargoName.trim().length<3)&&t.push({field:"cargoName",message:"El nombre del cargo debe tener al menos 3 caracteres"}),(!e.area||e.area.trim().length<2)&&t.push({field:"area",message:"El √°rea debe tener al menos 2 caracteres"}),(!e.zona||e.zona.trim().length<2)&&t.push({field:"zona",message:"La zona debe tener al menos 2 caracteres"});var n=parseInt(e.numTrabajadores,10);return(!n||n<1)&&t.push({field:"numTrabajadores",message:"Debe haber al menos 1 trabajador"}),(!e.descripcionTareas||e.descripcionTareas.trim().length<20)&&t.push({field:"descripcionTareas",message:"La descripci√≥n de tareas debe tener al menos 20 caracteres"}),{isValid:0===t.length,errors:t}},onEnter:function(){setTimeout((function(){var e=document.getElementById("cargo-name"),t=document.getElementById("autocomplete-suggestions");if(e&&t){var n,a,r,o=(n=function(){var n=c(g().mark((function n(a){var r;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.length<3)){n.next=3;break}return t.style.display="none",n.abrupt("return");case 3:return n.next=5,Le("/autocomplete-cargo?q=".concat(encodeURIComponent(a)));case 5:(r=n.sent).success&&r.suggestions&&r.suggestions.length>0?(t.innerHTML='\n              <p style="font-size: 1.4rem; font-weight: 600; margin-bottom: 1rem;">\n                üí° Sugerencias:\n              </p>\n              '.concat(r.suggestions.map((function(e){return'\n                <button\n                  type="button"\n                  class="suggestion-chip"\n                  data-cargo="'.concat(e.cargo,'"\n                  style="margin: 0.5rem; cursor: pointer;"\n                >\n                  ').concat(e.cargo,'\n                  <span class="confidence">').concat(e.frequency,"%</span>\n                </button>\n              ")})).join(""),"\n            "),t.style.display="block",t.querySelectorAll(".suggestion-chip").forEach((function(n){n.addEventListener("click",(function(){e.value=n.dataset.cargo,t.style.display="none"}))}))):t.style.display="none";case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a=500,function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];clearTimeout(r),r=setTimeout((function(){clearTimeout(r),n.apply(void 0,t)}),a)});e.addEventListener("input",(function(e){o(e.target.value)}))}}),100)}}}function Ve(e,t,n){return{id:"toggles-especiales-".concat(e),title:"Caracter√≠sticas especiales: ".concat(n),render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(we||(we=m(['\n      <h2>‚ö†Ô∏è Caracter√≠sticas Especiales del Cargo</h2>\n      <p>\n        Indica si este cargo tiene alguna de las siguientes caracter√≠sticas especiales\n        que requieren evaluaci√≥n y controles adicionales seg√∫n la normatividad colombiana.\n      </p>\n\n      <div style="display: flex; flex-direction: column; gap: 2.5rem; margin-top: 3rem;">\n        \x3c!-- Tareas Rutinarias --\x3e\n        <label\n          class="wizard-option toggle-option ','"\n          style="padding: 2rem; cursor: pointer; text-align: left; display: flex; align-items: start; gap: 1.5rem; border: 2px solid #e0e0e0;"\n        >\n          <input\n            type="checkbox"\n            name="tareasRutinarias"\n            ?checked=','\n            style="width: 24px; height: 24px; cursor: pointer; margin-top: 0.3rem; flex-shrink: 0;"\n          />\n          <div style="flex: 1;">\n            <div style="font-size: 1.6rem; font-weight: 600; color: #383d47; margin-bottom: 0.8rem;">\n              üîÑ Tareas Rutinarias\n            </div>\n            <div style="font-size: 1.4rem; color: #666; line-height: 1.6;">\n              El cargo realiza actividades repetitivas o programadas de manera regular.\n              Esto puede implicar mayor riesgo biomec√°nico y psicosocial por monoton√≠a.\n            </div>\n          </div>\n        </label>\n\n        \x3c!-- Manipula Alimentos --\x3e\n        <label\n          class="wizard-option toggle-option ','"\n          style="padding: 2rem; cursor: pointer; text-align: left; display: flex; align-items: start; gap: 1.5rem; border: 2px solid #e0e0e0;"\n        >\n          <input\n            type="checkbox"\n            name="manipulaAlimentos"\n            ?checked=','\n            style="width: 24px; height: 24px; cursor: pointer; margin-top: 0.3rem; flex-shrink: 0;"\n          />\n          <div style="flex: 1;">\n            <div style="font-size: 1.6rem; font-weight: 600; color: #383d47; margin-bottom: 0.8rem;">\n              üçΩÔ∏è Manipulaci√≥n de Alimentos\n            </div>\n            <div style="font-size: 1.4rem; color: #666; line-height: 1.6;">\n              <strong>Res. 2674/2013:</strong> Requiere certificaci√≥n sanitaria, ex√°menes m√©dicos espec√≠ficos\n              y cumplimiento de BPM (Buenas Pr√°cticas de Manufactura).\n            </div>\n          </div>\n        </label>\n\n        \x3c!-- Trabajo en Alturas --\x3e\n        <label\n          class="wizard-option toggle-option ','"\n          style="padding: 2rem; cursor: pointer; text-align: left; display: flex; align-items: start; gap: 1.5rem; border: 2px solid #ff9800;"\n        >\n          <input\n            type="checkbox"\n            name="trabajaAlturas"\n            ?checked=','\n            style="width: 24px; height: 24px; cursor: pointer; margin-top: 0.3rem; flex-shrink: 0;"\n          />\n          <div style="flex: 1;">\n            <div style="font-size: 1.6rem; font-weight: 600; color: #ff9800; margin-bottom: 0.8rem;">\n              ‚õ∞Ô∏è Trabajo en Alturas (CR√çTICO)\n            </div>\n            <div style="font-size: 1.4rem; color: #666; line-height: 1.6;">\n              <strong>Res. 1409/2012:</strong> Trabajo a partir de 1.5 metros de altura.\n              Requiere certificaci√≥n obligatoria, ex√°menes m√©dicos anuales, sistemas de protecci√≥n contra ca√≠das\n              y programa de protecci√≥n contra ca√≠das (SG-SST).\n            </div>\n          </div>\n        </label>\n\n        \x3c!-- Espacios Confinados --\x3e\n        <label\n          class="wizard-option toggle-option ','"\n          style="padding: 2rem; cursor: pointer; text-align: left; display: flex; align-items: start; gap: 1.5rem; border: 2px solid #f44336;"\n        >\n          <input\n            type="checkbox"\n            name="trabajaEspaciosConfinados"\n            ?checked=','\n            style="width: 24px; height: 24px; cursor: pointer; margin-top: 0.3rem; flex-shrink: 0;"\n          />\n          <div style="flex: 1;">\n            <div style="font-size: 1.6rem; font-weight: 600; color: #f44336; margin-bottom: 0.8rem;">\n              üö™ Espacios Confinados (CR√çTICO)\n            </div>\n            <div style="font-size: 1.4rem; color: #666; line-height: 1.6;">\n              <strong>Res. 1409/2012:</strong> Espacios con entradas/salidas limitadas y ventilaci√≥n desfavorable.\n              Requiere permiso de trabajo, monitoreo atmosf√©rico, entrenamiento especializado y plan de rescate.\n            </div>\n          </div>\n        </label>\n\n        \x3c!-- Conduce Veh√≠culo --\x3e\n        <label\n          class="wizard-option toggle-option ','"\n          style="padding: 2rem; cursor: pointer; text-align: left; display: flex; align-items: start; gap: 1.5rem; border: 2px solid #e0e0e0;"\n        >\n          <input\n            type="checkbox"\n            name="conduceVehiculo"\n            ?checked=','\n            style="width: 24px; height: 24px; cursor: pointer; margin-top: 0.3rem; flex-shrink: 0;"\n          />\n          <div style="flex: 1;">\n            <div style="font-size: 1.6rem; font-weight: 600; color: #383d47; margin-bottom: 0.8rem;">\n              üöó Conduce Veh√≠culos\n            </div>\n            <div style="font-size: 1.4rem; color: #666; line-height: 1.6;">\n              <strong>Res. 1565/2014 (PESV):</strong> Requiere licencia de conducci√≥n vigente,\n              ex√°menes m√©dicos espec√≠ficos (visiometr√≠a, audiometr√≠a), capacitaci√≥n en conducci√≥n defensiva\n              y seguridad vial.\n            </div>\n          </div>\n        </label>\n      </div>\n\n      <div class="wizard-hint" style="margin-top: 3rem;">\n        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n        </svg>\n        <span>\n          Estas caracter√≠sticas determinan requisitos legales espec√≠ficos y controles adicionales\n          en el profesiograma y perfil del cargo.\n        </span>\n      </div>\n    '])),e.tareasRutinarias?"selected":"",e.tareasRutinarias||!1,e.manipulaAlimentos?"selected":"",e.manipulaAlimentos||!1,e.trabajaAlturas?"selected":"",e.trabajaAlturas||!1,e.trabajaEspaciosConfinados?"selected":"",e.trabajaEspaciosConfinados||!1,e.conduceVehiculo?"selected":"",e.conduceVehiculo||!1)},getData:function(){var e,t,n,a,r;return{tareasRutinarias:(null===(e=document.querySelector('input[name="tareasRutinarias"]'))||void 0===e?void 0:e.checked)||!1,manipulaAlimentos:(null===(t=document.querySelector('input[name="manipulaAlimentos"]'))||void 0===t?void 0:t.checked)||!1,trabajaAlturas:(null===(n=document.querySelector('input[name="trabajaAlturas"]'))||void 0===n?void 0:n.checked)||!1,trabajaEspaciosConfinados:(null===(a=document.querySelector('input[name="trabajaEspaciosConfinados"]'))||void 0===a?void 0:a.checked)||!1,conduceVehiculo:(null===(r=document.querySelector('input[name="conduceVehiculo"]'))||void 0===r?void 0:r.checked)||!1}},validate:function(){return{isValid:!0,errors:[]}},onEnter:function(){setTimeout((function(){document.querySelectorAll('.toggle-option input[type="checkbox"]').forEach((function(e){e.addEventListener("change",(function(){var t=e.closest(".toggle-option");t&&t.classList.toggle("selected",e.checked)}))}))}),100)}}}function Fe(e,t,n){return{id:"ges-selection-".concat(e),title:"Riesgos del cargo: ".concat(n),render:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).gesSeleccionados||[];return L(Se||(Se=m(['\n        <h2>‚ö†Ô∏è Selecciona los riesgos para "','"</h2>\n        <p>Indica qu√© riesgos est√°n presentes en este cargo seg√∫n la GTC 45.</p>\n\n        \x3c!-- Sugerencias de IA --\x3e\n        <div id="ai-ges-suggestions" style="display: none;" class="ai-suggestions">\n          <p style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem;">\n            ‚ú® Sugerencias basadas en el cargo:\n          </p>\n          <div id="ai-ges-chips"></div>\n        </div>\n\n        \x3c!-- Selecci√≥n manual por categor√≠as --\x3e\n        <div style="margin-top: 3rem;">\n          ','\n        </div>\n\n        <div class="wizard-hint" style="margin-top: 3rem;">\n          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n            <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n          </svg>\n          <span>\n            Selecciona al menos un riesgo. Puedes seleccionar varios si aplican al cargo.\n          </span>\n        </div>\n      '])),n,Object.entries(ve).map((function(t){var n=de(t,2),a=n[0],r=n[1],o=r.color,i=r.items;return L(ke||(ke=m(['\n              <div style="margin-bottom: 3rem;">\n                <h3 style="font-size: 1.8rem; font-weight: 600; color: ','; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 1rem;">\n                  <span style="display: inline-block; width: 4px; height: 2.4rem; background: ','; border-radius: 2px;"></span>\n                  ','\n                </h3>\n                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">\n                  ',"\n                </div>\n              </div>\n            "])),o,o,a,i.map((function(t){var n=e.some((function(e){return e.riesgo===a&&e.ges===t}));return L(Ee||(Ee=m(['\n                      <label\n                        class="wizard-option ','"\n                        style="padding: 1.5rem; cursor: pointer; text-align: left; display: flex; align-items: center; gap: 1rem; border-left: 3px solid ',';"\n                      >\n                        <input\n                          type="checkbox"\n                          name="ges-','"\n                          value="','"\n                          data-category="','"\n                          ?checked=','\n                          style="width: 18px; height: 18px; cursor: pointer;"\n                        />\n                        <span style="font-size: 1.4rem;">',"</span>\n                      </label>\n                    "])),n?"selected":"",o,a,t,a,n,t)})))})))},getData:(r=c(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelectorAll('input[type="checkbox"][name^="ges-"]:checked'),n=[],t.forEach((function(e){n.push({riesgo:e.dataset.category,ges:e.value,controles:{fuente:"",medio:"",individuo:""}})})),e.abrupt("return",{gesSeleccionados:n});case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),validate:function(e){var t=[];return e.gesSeleccionados&&0!==e.gesSeleccionados.length||t.push({field:"gesSeleccionados",message:"Debe seleccionar al menos un riesgo para este cargo"}),{isValid:0===t.length,errors:t}},onEnter:(a=c(g().mark((function t(n){var a,r,o;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.empresa||{},!(r=n["cargo-info-".concat(e)]||{}).cargoName){t.next=7;break}return t.next=5,Le("/suggest-ges",{cargoName:r.cargoName,sector:a.sector});case 5:(o=t.sent).success&&o.suggestions&&o.suggestions.length>0&&(Be.ges[e]=o.suggestions,setTimeout((function(){var e=document.getElementById("ai-ges-suggestions"),t=document.getElementById("ai-ges-chips");e&&t&&(t.innerHTML=o.suggestions.map((function(e){return'\n                <button\n                  type="button"\n                  class="suggestion-chip"\n                  data-riesgo="'.concat(e.riesgo,'"\n                  data-category="').concat(e.riesgo.split(" - ")[0],'"\n                >\n                  ').concat(e.riesgo,'\n                  <span class="confidence">').concat(e.confidence,"% match</span>\n                </button>\n              ")})).join(""),e.style.display="block",t.querySelectorAll(".suggestion-chip").forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.riesgo,n=e.dataset.category,a=document.querySelector('input[type="checkbox"][data-category="'.concat(n,'"][value*="').concat(t.split(" - ")[1]||t,'"]'));if(a){a.checked=!a.checked;var r=a.closest(".wizard-option");r&&r.classList.toggle("selected",a.checked)}e.classList.toggle("selected")}))})))}),100));case 7:setTimeout((function(){document.querySelectorAll('input[type="checkbox"][name^="ges-"]').forEach((function(e){e.addEventListener("change",(function(){var t=e.closest(".wizard-option");t&&t.classList.toggle("selected",e.checked)}))}))}),100);case 8:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})};var a,r}function Ge(e,t,n,a,r){var o,s,l=(null===(o=ve[a])||void 0===o?void 0:o.color)||"#757575";return{id:"controles-".concat(e,"-").concat(t),title:"".concat(r),render:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.log("üé® Rendering controles step cargo=".concat(e,", ges=").concat(t)),console.log("üì¶ Data received:",o),console.log("üìå data.nd=".concat(o.nd,", data.ne=").concat(o.ne,", data.nc=").concat(o.nc)),L(ze||(ze=m(['\n      <div style="border-left: 4px solid ','; padding-left: 2rem; margin-bottom: 2rem;">\n        <h2 style="color: ','; margin-bottom: 0.5rem;">üõ°Ô∏è ','</h2>\n        <p style="color: #666; font-size: 1.4rem;">\n          <strong>Cargo:</strong> '," | <strong>Categor√≠a:</strong> ",'\n        </p>\n      </div>\n\n      \x3c!-- SECCI√ìN 1: NIVELES DE RIESGO (OBLIGATORIO) --\x3e\n      <div style="background: #f8f9fa; border-radius: 12px; padding: 2.5rem; margin-bottom: 3rem;">\n        <h3 style="font-size: 2rem; font-weight: 700; color: #383d47; margin-bottom: 2rem;">\n          üìä Niveles de Riesgo GTC 45 <span style="color: #f44336;">*</span>\n        </h3>\n\n        \x3c!-- Calculadora en tiempo real --\x3e\n        <div id="risk-calculator-',"-",'" style="background: white; border-radius: 8px; padding: 2rem; margin-bottom: 2.5rem; display: none; border: 2px solid #e0e0e0;">\n          <h4 style="font-size: 1.6rem; margin-bottom: 1.5rem; color: #383d47;">‚úÖ Resultado del C√°lculo</h4>\n          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;">\n            <div style="padding: 1.5rem; border-radius: 8px; background: #f8f9fa;">\n              <div style="font-size: 1.2rem; color: #666; margin-bottom: 0.5rem;">Nivel de Probabilidad (NP)</div>\n              <div id="np-value-',"-",'" style="font-size: 2.4rem; font-weight: 700; color: #383d47;">-</div>\n              <div id="np-interpretation-',"-",'" style="font-size: 1.2rem; color: #666; margin-top: 0.5rem;"></div>\n            </div>\n            <div id="nr-card-',"-",'" style="padding: 1.5rem; border-radius: 8px; background: #f8f9fa;">\n              <div style="font-size: 1.2rem; color: #666; margin-bottom: 0.5rem;">Nivel de Riesgo (NR)</div>\n              <div id="nr-value-',"-",'" style="font-size: 2.4rem; font-weight: 700;">-</div>\n              <div id="nr-level-',"-",'" style="font-size: 1.6rem; font-weight: 600; margin-top: 0.5rem;"></div>\n              <div id="nr-interpretation-',"-",'" style="font-size: 1.2rem; margin-top: 0.5rem;"></div>\n              <div id="nr-acceptability-',"-",'" style="font-size: 1.2rem; font-weight: 600; margin-top: 0.5rem;"></div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ND - Nivel de Deficiencia --\x3e\n        <div style="margin-bottom: 2.5rem;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">\n            <label style="font-size: 1.6rem; font-weight: 600; color: #383d47;">\n              Nivel de Deficiencia (ND) <span style="color: #f44336;">*</span>\n            </label>\n            <button type="button" class="tooltip-btn" data-tooltip="nd" style="background: #5dc4af; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: help; font-weight: 700; font-size: 1.2rem;">?</button>\n          </div>\n          <p style="font-size: 1.3rem; color: #666; margin-bottom: 1.5rem;">\n            Magnitud de la relaci√≥n entre las condiciones de trabajo y la posibilidad de da√±o\n          </p>\n          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">\n            \x3c!-- BAJO (0) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nd-',"-",'" style="cursor: pointer; position: relative;" title="Riesgo bajo o aceptable, mantener controles">\n              <input type="radio" name="nd-',"-",'" value="0" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#4caf50" style="background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">0</div>\n                <div style="font-size: 1.2rem; font-weight: 600;">Bajo</div>\n              </div>\n            </label>\n\n            \x3c!-- MEDIO (2) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nd-',"-",'" style="cursor: pointer; position: relative;" title="Riesgo medio, mejorar controles existentes">\n              <input type="radio" name="nd-',"-",'" value="2" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ffc107" style="background: linear-gradient(135deg, #ffc107 0%, #ffa000 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">2</div>\n                <div style="font-size: 1.2rem; font-weight: 600;">Medio</div>\n              </div>\n            </label>\n\n            \x3c!-- ALTO (6) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nd-',"-",'" style="cursor: pointer; position: relative;" title="Riesgo alto, requiere correcciones urgentes">\n              <input type="radio" name="nd-',"-",'" value="6" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ff9800" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">6</div>\n                <div style="font-size: 1.2rem; font-weight: 600;">Alto</div>\n              </div>\n            </label>\n\n            \x3c!-- MUY ALTO (10) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nd-',"-",'" style="cursor: pointer; position: relative;" title="Riesgo extremadamente alto, requiere acci√≥n inmediata">\n              <input type="radio" name="nd-',"-",'" value="10" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#f44336" style="background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">10</div>\n                <div style="font-size: 1.2rem; font-weight: 600;">Muy Alto</div>\n              </div>\n            </label>\n          </div>\n        </div>\n\n        \x3c!-- NE - Nivel de Exposici√≥n --\x3e\n        <div style="margin-bottom: 2.5rem;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">\n            <label style="font-size: 1.6rem; font-weight: 600; color: #383d47;">\n              Nivel de Exposici√≥n (NE) <span style="color: #f44336;">*</span>\n            </label>\n            <button type="button" class="tooltip-btn" data-tooltip="ne" style="background: #5dc4af; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: help; font-weight: 700; font-size: 1.2rem;">?</button>\n          </div>\n          <p style="font-size: 1.3rem; color: #666; margin-bottom: 1.5rem;">\n            Frecuencia con que el trabajador se expone al factor de riesgo\n          </p>\n          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">\n            \x3c!-- ESPOR√ÅDICA (1) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="ne-',"-",'" style="cursor: pointer; position: relative;" title="Muy rara vez, menos del 5% de la jornada">\n              <input type="radio" name="ne-',"-",'" value="1" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#4caf50" style="background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">1</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Espor√°dica</div>\n              </div>\n            </label>\n\n            \x3c!-- OCASIONAL (2) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="ne-',"-",'" style="cursor: pointer; position: relative;" title="Alguna vez durante la jornada, menos del 50%">\n              <input type="radio" name="ne-',"-",'" value="2" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ffc107" style="background: linear-gradient(135deg, #ffc107 0%, #ffa000 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">2</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Ocasional</div>\n              </div>\n            </label>\n\n            \x3c!-- FRECUENTE (3) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="ne-',"-",'" style="cursor: pointer; position: relative;" title="Varias veces al d√≠a, m√°s del 50% de la jornada">\n              <input type="radio" name="ne-',"-",'" value="3" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ff9800" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">3</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Frecuente</div>\n              </div>\n            </label>\n\n            \x3c!-- CONTINUA (4) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="ne-',"-",'" style="cursor: pointer; position: relative;" title="Exposici√≥n continua durante toda la jornada">\n              <input type="radio" name="ne-',"-",'" value="4" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#f44336" style="background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">4</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Continua</div>\n              </div>\n            </label>\n          </div>\n        </div>\n\n        \x3c!-- NC - Nivel de Consecuencia --\x3e\n        <div style="margin-bottom: 0;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">\n            <label style="font-size: 1.6rem; font-weight: 600; color: #383d47;">\n              Nivel de Consecuencia (NC) <span style="color: #f44336;">*</span>\n            </label>\n            <button type="button" class="tooltip-btn" data-tooltip="nc" style="background: #5dc4af; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: help; font-weight: 700; font-size: 1.2rem;">?</button>\n          </div>\n          <p style="font-size: 1.3rem; color: #666; margin-bottom: 1.5rem;">\n            Resultado m√°s probable del accidente o enfermedad profesional\n          </p>\n          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">\n            \x3c!-- LEVE (10) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nc-',"-",'" style="cursor: pointer; position: relative;" title="Lesiones leves, primeros auxilios, molestias">\n              <input type="radio" name="nc-',"-",'" value="10" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#4caf50" style="background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">10</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Leve</div>\n              </div>\n            </label>\n\n            \x3c!-- GRAVE (25) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nc-',"-",'" style="cursor: pointer; position: relative;" title="Lesiones con incapacidad laboral temporal">\n              <input type="radio" name="nc-',"-",'" value="25" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ff9800" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">25</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Grave</div>\n              </div>\n            </label>\n\n            \x3c!-- MUY GRAVE (60) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nc-',"-",'" style="cursor: pointer; position: relative;" title="Lesiones graves irreversibles (amputaciones, fracturas mayores)">\n              <input type="radio" name="nc-',"-",'" value="60" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#ff5722" style="background: linear-gradient(135deg, #ff5722 0%, #e64a19 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">60</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Muy Grave</div>\n              </div>\n            </label>\n\n            \x3c!-- MORTAL (100) --\x3e\n            <label class="nivel-bar ','" data-nivel-container="nc-',"-",'" style="cursor: pointer; position: relative;" title="Muerte o da√±o irreversible">\n              <input type="radio" name="nc-',"-",'" value="100" ?checked=',' style="position: absolute; opacity: 0;" />\n              <div class="nivel-bar-inner" data-color="#f44336" style="background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%); color: white; padding: 1.2rem; border-radius: 8px; text-align: center; transition: all 0.3s; box-shadow: ',"; transform: ","; border: ",';">\n                <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.3rem;">100</div>\n                <div style="font-size: 1.1rem; font-weight: 600;">Mortal</div>\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- SECCI√ìN 2: CONTROLES (OPCIONAL) --\x3e\n      <div style="margin-bottom: 3rem;">\n        <h3 style="font-size: 2rem; font-weight: 700; color: #383d47; margin-bottom: 1.5rem;">\n          üõ°Ô∏è Controles Existentes <span style="font-size: 1.3rem; color: #666; font-weight: 400;">(Opcional)</span>\n        </h3>\n\n        \x3c!-- Sugerencias de IA --\x3e\n      <div id="ai-controls-suggestions-',"-",'" style="display: none;" class="ai-suggestions">\n        <p style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem;">\n          ‚ú® Controles sugeridos por IA:\n        </p>\n        <div style="display: flex; flex-direction: column; gap: 1rem;">\n          <button\n            type="button"\n            id="btn-apply-fuente-',"-",'"\n            class="suggestion-chip"\n            style="width: 100%; justify-content: space-between; padding: 1.5rem;"\n          >\n            <span><strong>Fuente:</strong> <span id="sugg-fuente-',"-",'"></span></span>\n            <span style="font-size: 1.2rem;">Aplicar ‚Üí</span>\n          </button>\n          <button\n            type="button"\n            id="btn-apply-medio-',"-",'"\n            class="suggestion-chip"\n            style="width: 100%; justify-content: space-between; padding: 1.5rem;"\n          >\n            <span><strong>Medio:</strong> <span id="sugg-medio-',"-",'"></span></span>\n            <span style="font-size: 1.2rem;">Aplicar ‚Üí</span>\n          </button>\n          <button\n            type="button"\n            id="btn-apply-individuo-',"-",'"\n            class="suggestion-chip"\n            style="width: 100%; justify-content: space-between; padding: 1.5rem;"\n          >\n            <span><strong>Individuo:</strong> <span id="sugg-individuo-',"-",'"></span></span>\n            <span style="font-size: 1.2rem;">Aplicar ‚Üí</span>\n          </button>\n        </div>\n      </div>\n\n      \x3c!-- Formulario de controles --\x3e\n      <div style="display: flex; flex-direction: column; gap: 2.5rem; margin-top: 3rem;">\n        <div>\n          <label for="control-fuente-',"-",'" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Control en la Fuente\n          </label>\n          <textarea\n            id="control-fuente-',"-",'"\n            name="fuente"\n            placeholder="Ej: Mantenimiento preventivo, guardas de seguridad. Si no hay controles escriba \'Ninguno\'"\n            rows="3"\n          >','</textarea>\n          <p style="font-size: 1.3rem; color: #666; margin-top: 0.5rem;">\n            Acciones para eliminar o reducir el riesgo en su origen. Si no hay controles, escriba "Ninguno"\n          </p>\n        </div>\n\n        <div>\n          <label for="control-medio-',"-",'" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Control en el Medio\n          </label>\n          <textarea\n            id="control-medio-',"-",'"\n            name="medio"\n            placeholder="Ej: Se√±alizaci√≥n, ventilaci√≥n, barreras f√≠sicas. Si no hay controles escriba \'Ninguno\'"\n            rows="3"\n          >','</textarea>\n          <p style="font-size: 1.3rem; color: #666; margin-top: 0.5rem;">\n            Medidas para reducir la exposici√≥n durante la trayectoria del riesgo. Si no hay, escriba "Ninguno"\n          </p>\n        </div>\n\n        <div>\n          <label for="control-individuo-',"-",'" style="display: block; font-weight: 600; margin-bottom: 0.8rem; color: #383d47;">\n            Control en el Individuo\n          </label>\n          <textarea\n            id="control-individuo-',"-",'"\n            name="individuo"\n            placeholder="Ej: EPP (guantes, gafas, protecci√≥n auditiva), capacitaci√≥n. Si no hay escriba \'Ninguno\'"\n            rows="3"\n          >','</textarea>\n          <p style="font-size: 1.3rem; color: #666; margin-top: 0.5rem;">\n            Equipos de protecci√≥n personal y entrenamiento. Si no hay controles, escriba "Ninguno"\n          </p>\n        </div>\n      </div>\n\n      <div class="wizard-hint" style="margin-top: 3rem;">\n        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n        </svg>\n        <span>\n          Los controles deben estar ordenados por jerarqu√≠a: primero eliminar el riesgo,\n          luego proteger al trabajador.\n        </span>\n      </div>\n    '])),l,l,r,n,a,e,t,e,t,e,t,e,t,e,t,e,t,e,t,e,t,"0"===o.nd?"selected":"",e,t,e,t,"0"===o.nd,"0"===o.nd?"0 4px 12px rgba(76, 175, 80, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","0"===o.nd?"scale(1.05)":"scale(1)","0"===o.nd?"3px solid #fff":"3px solid transparent","2"===o.nd?"selected":"",e,t,e,t,"2"===o.nd,"2"===o.nd?"0 4px 12px rgba(255, 193, 7, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","2"===o.nd?"scale(1.05)":"scale(1)","2"===o.nd?"3px solid #fff":"3px solid transparent","6"===o.nd?"selected":"",e,t,e,t,"6"===o.nd,"6"===o.nd?"0 4px 12px rgba(255, 152, 0, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","6"===o.nd?"scale(1.05)":"scale(1)","6"===o.nd?"3px solid #fff":"3px solid transparent","10"===o.nd?"selected":"",e,t,e,t,"10"===o.nd,"10"===o.nd?"0 4px 12px rgba(244, 67, 54, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","10"===o.nd?"scale(1.05)":"scale(1)","10"===o.nd?"3px solid #fff":"3px solid transparent","1"===o.ne?"selected":"",e,t,e,t,"1"===o.ne,"1"===o.ne?"0 4px 12px rgba(76, 175, 80, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","1"===o.ne?"scale(1.05)":"scale(1)","1"===o.ne?"3px solid #fff":"3px solid transparent","2"===o.ne?"selected":"",e,t,e,t,"2"===o.ne,"2"===o.ne?"0 4px 12px rgba(255, 193, 7, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","2"===o.ne?"scale(1.05)":"scale(1)","2"===o.ne?"3px solid #fff":"3px solid transparent","3"===o.ne?"selected":"",e,t,e,t,"3"===o.ne,"3"===o.ne?"0 4px 12px rgba(255, 152, 0, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","3"===o.ne?"scale(1.05)":"scale(1)","3"===o.ne?"3px solid #fff":"3px solid transparent","4"===o.ne?"selected":"",e,t,e,t,"4"===o.ne,"4"===o.ne?"0 4px 12px rgba(244, 67, 54, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","4"===o.ne?"scale(1.05)":"scale(1)","4"===o.ne?"3px solid #fff":"3px solid transparent","10"===o.nc?"selected":"",e,t,e,t,"10"===o.nc,"10"===o.nc?"0 4px 12px rgba(76, 175, 80, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","10"===o.nc?"scale(1.05)":"scale(1)","10"===o.nc?"3px solid #fff":"3px solid transparent","25"===o.nc?"selected":"",e,t,e,t,"25"===o.nc,"25"===o.nc?"0 4px 12px rgba(255, 152, 0, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","25"===o.nc?"scale(1.05)":"scale(1)","25"===o.nc?"3px solid #fff":"3px solid transparent","60"===o.nc?"selected":"",e,t,e,t,"60"===o.nc,"60"===o.nc?"0 4px 12px rgba(255, 87, 34, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","60"===o.nc?"scale(1.05)":"scale(1)","60"===o.nc?"3px solid #fff":"3px solid transparent","100"===o.nc?"selected":"",e,t,e,t,"100"===o.nc,"100"===o.nc?"0 4px 12px rgba(244, 67, 54, 0.4)":"0 2px 4px rgba(0,0,0,0.1)","100"===o.nc?"scale(1.05)":"scale(1)","100"===o.nc?"3px solid #fff":"3px solid transparent",e,t,e,t,e,t,e,t,e,t,e,t,e,t,e,t,e,t,o.fuente||"",e,t,e,t,o.medio||"",e,t,e,t,o.individuo||"")},getData:function(){var n,a,r,o,i,s;return{fuente:(null===(n=document.getElementById("control-fuente-".concat(e,"-").concat(t)))||void 0===n?void 0:n.value)||"",medio:(null===(a=document.getElementById("control-medio-".concat(e,"-").concat(t)))||void 0===a?void 0:a.value)||"",individuo:(null===(r=document.getElementById("control-individuo-".concat(e,"-").concat(t)))||void 0===r?void 0:r.value)||"",nd:null===(o=document.querySelector('input[name="nd-'.concat(e,"-").concat(t,'"]:checked')))||void 0===o?void 0:o.value,ne:null===(i=document.querySelector('input[name="ne-'.concat(e,"-").concat(t,'"]:checked')))||void 0===i?void 0:i.value,nc:null===(s=document.querySelector('input[name="nc-'.concat(e,"-").concat(t,'"]:checked')))||void 0===s?void 0:s.value}},validate:function(e){var t=[];return e.nd||t.push({field:"nd",message:"Debe seleccionar el Nivel de Deficiencia (ND)"}),e.ne||t.push({field:"ne",message:"Debe seleccionar el Nivel de Exposici√≥n (NE)"}),e.nc||t.push({field:"nc",message:"Debe seleccionar el Nivel de Consecuencia (NC)"}),{isValid:0===t.length,errors:t}},onEnter:(s=c(g().mark((function n(o){var s,c,l,d,u,p=arguments;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("üéØ Entering controles step for cargo ".concat(e,", GES ").concat(t)),c=function(n){setTimeout((function(){var a=document.getElementById("ai-controls-suggestions-".concat(e,"-").concat(t)),r=document.getElementById("sugg-fuente-".concat(e,"-").concat(t)),o=document.getElementById("sugg-medio-".concat(e,"-").concat(t)),i=document.getElementById("sugg-individuo-".concat(e,"-").concat(t));if(a&&r&&o&&i){r.textContent=n.fuente.substring(0,80)+"...",o.textContent=n.medio.substring(0,80)+"...",i.textContent=n.individuo.substring(0,80)+"...",a.style.display="block";var s=document.getElementById("btn-apply-fuente-".concat(e,"-").concat(t)),c=document.getElementById("btn-apply-medio-".concat(e,"-").concat(t)),l=document.getElementById("btn-apply-individuo-".concat(e,"-").concat(t));s&&"true"!==s.dataset.listenerAdded&&(s.addEventListener("click",(function(){document.getElementById("control-fuente-".concat(e,"-").concat(t)).value=n.fuente})),s.dataset.listenerAdded="true"),c&&"true"!==c.dataset.listenerAdded&&(c.addEventListener("click",(function(){document.getElementById("control-medio-".concat(e,"-").concat(t)).value=n.medio})),c.dataset.listenerAdded="true"),l&&"true"!==l.dataset.listenerAdded&&(l.addEventListener("click",(function(){document.getElementById("control-individuo-".concat(e,"-").concat(t)).value=n.individuo})),l.dataset.listenerAdded="true")}}),100)},(l=null===(s=Be.controls[e])||void 0===s?void 0:s[t])?(console.log("‚ú® Using cached AI controls"),c(l)):(d=o.empresa||{},u=o["cargo-info-".concat(e)]||{},console.log("üìä Fetching AI controls for:",{riesgo:a,ges:r,cargoName:u.cargoName,sector:d.sector}),Le("/suggest-controls",{riesgo:a,ges:r,cargoName:u.cargoName,sector:d.sector}).then((function(n){console.log("‚úÖ AI controls result:",n),n.success&&n.controls&&(Be.controls[e]||(Be.controls[e]={}),Be.controls[e][t]=n.controls,c(n.controls))})).catch((function(e){console.error("‚ùå Error fetching AI controls:",e)}))),setTimeout((function(){var n=document.querySelectorAll('input[name="nd-'.concat(e,"-").concat(t,'"]')),a=document.querySelectorAll('input[name="ne-'.concat(e,"-").concat(t,'"]')),r=document.querySelectorAll('input[name="nc-'.concat(e,"-").concat(t,'"]')),o=[].concat(i(n),i(a),i(r)),s="risk-calculator-".concat(e,"-").concat(t);if(console.log("üéØ Setting up nivel listeners for cargo ".concat(e,", GES ").concat(t)),console.log("Found ".concat(o.length," radio buttons")),0===o.length)return console.error("‚ùå No se encontraron radio buttons. Reintentando..."),void setTimeout((function(){return p.callee()}),300);var c=function(){var n,a,r,o=null===(n=document.querySelector('input[name="nd-'.concat(e,"-").concat(t,'"]:checked')))||void 0===n?void 0:n.value,i=null===(a=document.querySelector('input[name="ne-'.concat(e,"-").concat(t,'"]:checked')))||void 0===a?void 0:a.value,c=null===(r=document.querySelector('input[name="nc-'.concat(e,"-").concat(t,'"]:checked')))||void 0===r?void 0:r.value;if(o&&i&&c){var l=parseInt(o,10)*parseInt(i,10),d="";d=l>=24?"Muy Alto":l>=10?"Alto":l>=6?"Medio":"Bajo";var u=l*parseInt(c,10),p={};p=u>=600?{nivel:"I",interpretacion:"Situaci√≥n cr√≠tica. Correcci√≥n urgente",aceptabilidad:"No Aceptable",color:"#FF0000"}:u>=150?{nivel:"II",interpretacion:"Corregir o adoptar medidas de control",aceptabilidad:"No Aceptable o Aceptable con control espec√≠fico",color:"#FFA500"}:u>=40?{nivel:"III",interpretacion:"Mejorar el control existente",aceptabilidad:"Mejorable",color:"#FFFF00"}:{nivel:"IV",interpretacion:"No intervenir, salvo que an√°lisis lo justifique",aceptabilidad:"Aceptable",color:"#008000"};var g=document.getElementById(s);if(g){g.style.display="block";var m=document.getElementById("np-value-".concat(e,"-").concat(t)),v=document.getElementById("np-interpretation-".concat(e,"-").concat(t));m&&(m.textContent=l),v&&(v.textContent=d);var h=document.getElementById("nr-card-".concat(e,"-").concat(t));h&&(h.style.borderColor=p.color,h.style.borderWidth="3px");var f=document.getElementById("nr-value-".concat(e,"-").concat(t)),y=document.getElementById("nr-level-".concat(e,"-").concat(t)),b=document.getElementById("nr-interpretation-".concat(e,"-").concat(t)),x=document.getElementById("nr-acceptability-".concat(e,"-").concat(t));f&&(f.textContent=u,f.style.color=p.color),y&&(y.textContent="Nivel ".concat(p.nivel),y.style.color=p.color),b&&(b.textContent=p.interpretacion),x&&(x.textContent="Aceptabilidad: ".concat(p.aceptabilidad))}}};o.forEach((function(e){e.addEventListener("change",(function(){console.log("‚úÖ Radio changed: ".concat(e.name," = ").concat(e.value));var t=e.closest(".nivel-bar");if(t){var n=t.getAttribute("data-nivel-container");document.querySelectorAll('.nivel-bar[data-nivel-container="'.concat(n,'"]')).forEach((function(e){e.classList.remove("selected");var t=e.querySelector(".checkmark-indicator");t&&t.remove()})),t.classList.add("selected");var a=t.querySelector(".nivel-bar-inner");if(a){var r=a.getAttribute("data-color")||"#f44336",o=document.createElement("div");o.className="checkmark-indicator",o.style.cssText="\n                  position: absolute;\n                  top: -8px;\n                  right: -8px;\n                  background: white;\n                  color: ".concat(r,";\n                  border-radius: 50%;\n                  width: 28px;\n                  height: 28px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 1.6rem;\n                  font-weight: 800;\n                  box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n                  z-index: 10;\n                "),o.textContent="‚úì",t.appendChild(o)}}c()}))})),setTimeout((function(){console.log("üîÑ Restaurando checkmarks y calculando..."),o.forEach((function(e){if(e.checked){var t=e.closest(".nivel-bar");if(t&&(t.classList.add("selected"),!t.querySelector(".checkmark-indicator"))){var n=t.querySelector(".nivel-bar-inner");if(n){var a=n.getAttribute("data-color")||"#f44336",r=document.createElement("div");r.className="checkmark-indicator",r.style.cssText="\n                      position: absolute;\n                      top: -8px;\n                      right: -8px;\n                      background: white;\n                      color: ".concat(a,";\n                      border-radius: 50%;\n                      width: 28px;\n                      height: 28px;\n                      display: flex;\n                      align-items: center;\n                      justify-content: center;\n                      font-size: 1.6rem;\n                      font-weight: 800;\n                      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n                      z-index: 10;\n                    "),r.textContent="‚úì",t.appendChild(r)}}}})),c()}),100);var l=document.querySelectorAll(".tooltip-btn");console.log("üí° Found ".concat(l.length," tooltip buttons"));var d={nd:"Nivel de Deficiencia (ND): Magnitud de la relaci√≥n esperada entre el conjunto de peligros detectados y su relaci√≥n causal directa con posibles incidentes y con la eficacia de medidas preventivas existentes en un lugar de trabajo.\n\n‚Ä¢ Muy Alto (10): Se han detectado peligros que determinan como posible la generaci√≥n de incidentes o consecuencias muy significativas, o la eficacia del conjunto de medidas preventivas es nula o no existe, o ambos.\n‚Ä¢ Alto (6): Se han detectado algunos peligros que pueden dar lugar a consecuencias significativas, o el conjunto de medidas preventivas existentes respecto al riesgo es insuficiente, o ambos.\n‚Ä¢ Medio (2): Se han detectado peligros que pueden dar lugar a consecuencias poco significativas o de menor importancia, o el conjunto de medidas preventivas existentes es parcialmente eficaz.\n‚Ä¢ Bajo (0): No se ha detectado consecuencia alguna, o el conjunto de medidas preventivas existentes es eficaz.",ne:"Nivel de Exposici√≥n (NE): Frecuencia con la que se est√° expuesto al riesgo.\n\n‚Ä¢ Continua (4): La situaci√≥n de exposici√≥n se presenta sin interrupci√≥n o varias veces con tiempo prolongado durante la jornada laboral.\n‚Ä¢ Frecuente (3): La situaci√≥n de exposici√≥n se presenta varias veces durante la jornada laboral por tiempos cortos.\n‚Ä¢ Ocasional (2): La situaci√≥n de exposici√≥n se presenta alguna vez durante la jornada laboral y por un periodo de tiempo corto.\n‚Ä¢ Espor√°dica (1): La situaci√≥n de exposici√≥n se presenta de manera eventual.",nc:"Nivel de Consecuencia (NC): Resultado m√°s probable de un accidente debido al riesgo considerado, incluyendo da√±os personales y materiales.\n\n‚Ä¢ Mortal o Catastr√≥fico (100): Muerte(s) o p√©rdidas materiales muy graves.\n‚Ä¢ Muy Grave (60): Lesiones graves irreversibles (incapacidad permanente parcial o invalidez).\n‚Ä¢ Grave (25): Lesiones con incapacidad laboral temporal (ILT).\n‚Ä¢ Leve (10): Lesiones que no requieren hospitalizaci√≥n (primeros auxilios)."};l.forEach((function(e){if("true"!==e.dataset.listenerAdded){var t=e.dataset.tooltip;e.addEventListener("click",(function(e){e.preventDefault();var n=d[t];n&&alert(n)})),e.dataset.listenerAdded="true"}}))}),300);case 5:case"end":return n.stop()}}),n)}))),function(e){return s.apply(this,arguments)})}}var We={id:"review",title:"Revisi√≥n Final",onEnter:function(e){var t=e.empresa||{},n=[];Object.keys(e).forEach((function(t){if(t.startsWith("cargo-info-")){var a=parseInt(t.split("-")[2],10),r=e[t],o=e["ges-selection-".concat(a)]||{};n.push($e($e({},r),{},{gesSeleccionados:o.gesSeleccionados||[]}))}})),this.data.review={empresa:t,cargos:n,totalTrabajadores:n.reduce((function(e,t){return e+parseInt(t.numTrabajadores||0,10)}),0),totalRiesgos:n.reduce((function(e,t){var n;return e+((null===(n=t.gesSeleccionados)||void 0===n?void 0:n.length)||0)}),0)},console.log("üìä Review data prepared:",this.data.review),this.render()},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.empresa,n=void 0===t?{}:t,a=e.cargos,r=void 0===a?[]:a,o=e.totalTrabajadores,i=void 0===o?0:o,s=e.totalRiesgos,c=void 0===s?0:s;return console.log("üìã Rendering review with:",{empresa:n,cargos:r,totalTrabajadores:i,totalRiesgos:c}),L(Ce||(Ce=m(['\n      <h2>‚úÖ Revisi√≥n Final</h2>\n      <p>Revisa toda la informaci√≥n antes de generar los documentos.</p>\n\n      \x3c!-- Resumen de empresa --\x3e\n      <div style="background: white; border-radius: 12px; padding: 2rem; margin-top: 3rem; border: 2px solid #e0e0e0;">\n        <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 1.5rem; color: #383d47;">\n          üìã Empresa\n        </h3>\n        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">\n          <div>\n            <p style="font-size: 1.3rem; color: #666; margin-bottom: 0.5rem;">Nombre</p>\n            <p style="font-size: 1.5rem; font-weight: 600;">','</p>\n          </div>\n          <div>\n            <p style="font-size: 1.3rem; color: #666; margin-bottom: 0.5rem;">NIT</p>\n            <p style="font-size: 1.5rem; font-weight: 600;">','</p>\n          </div>\n          <div>\n            <p style="font-size: 1.3rem; color: #666; margin-bottom: 0.5rem;">Sector</p>\n            <p style="font-size: 1.5rem; font-weight: 600;">','</p>\n          </div>\n          <div>\n            <p style="font-size: 1.3rem; color: #666; margin-bottom: 0.5rem;">Ciudad</p>\n            <p style="font-size: 1.5rem; font-weight: 600;">','</p>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Estad√≠sticas --\x3e\n      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-top: 2rem;">\n        <div style="background: linear-gradient(135deg, rgba(93, 196, 175, 0.1), rgba(93, 196, 175, 0.05)); border-radius: 12px; padding: 2rem; text-align: center; border: 2px solid #5dc4af;">\n          <div style="font-size: 3.6rem; font-weight: 700; color: #5dc4af;">','</div>\n          <div style="font-size: 1.4rem; color: #666; margin-top: 0.5rem;">Cargos</div>\n        </div>\n        <div style="background: linear-gradient(135deg, rgba(56, 61, 71, 0.1), rgba(56, 61, 71, 0.05)); border-radius: 12px; padding: 2rem; text-align: center; border: 2px solid #383d47;">\n          <div style="font-size: 3.6rem; font-weight: 700; color: #383d47;">','</div>\n          <div style="font-size: 1.4rem; color: #666; margin-top: 0.5rem;">Trabajadores</div>\n        </div>\n        <div style="background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05)); border-radius: 12px; padding: 2rem; text-align: center; border: 2px solid #ff9800;">\n          <div style="font-size: 3.6rem; font-weight: 700; color: #ff9800;">','</div>\n          <div style="font-size: 1.4rem; color: #666; margin-top: 0.5rem;">Riesgos Identificados</div>\n        </div>\n      </div>\n\n      \x3c!-- Lista de cargos --\x3e\n      ','\n\n      <div class="wizard-hint" style="margin-top: 3rem;">\n        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n          <path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z"/>\n        </svg>\n        <span>\n          Al finalizar se generar√°n autom√°ticamente: Matriz de Riesgos, Profesiograma y Perfiles de Cargo.\n        </span>\n      </div>\n    '])),n.nombre||"Sin datos",n.nit||"Sin datos",n.sector||"Sin datos",n.ciudad||"Sin datos",r.length,i,c,r.length>0?L(Ae||(Ae=m(['\n        <div style="margin-top: 3rem;">\n          <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 1.5rem; color: #383d47;">\n            üë• Cargos Evaluados\n          </h3>\n          ',"\n        </div>\n      "])),r.map((function(e,t){var n,a;return L(je||(je=m(['\n            <div style="background: white; border-radius: 12px; padding: 2rem; margin-bottom: 1.5rem; border: 2px solid #e0e0e0;">\n              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">\n                <div>\n                  <h4 style="font-size: 1.6rem; font-weight: 600; color: #383d47;">','</h4>\n                  <p style="font-size: 1.3rem; color: #666; margin-top: 0.5rem;">\n                    '," ‚Ä¢ "," trabajador",'\n                  </p>\n                </div>\n                <div style="background: #5dc4af; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 1.3rem; font-weight: 600;">\n                  '," riesgo","\n                </div>\n              </div>\n              ","\n            </div>\n          "])),e.cargoName||"Sin nombre",e.area||"Sin √°rea",e.numTrabajadores||0,e.numTrabajadores>1?"es":"",(null===(n=e.gesSeleccionados)||void 0===n?void 0:n.length)||0,1!==(null===(a=e.gesSeleccionados)||void 0===a?void 0:a.length)?"s":"",e.gesSeleccionados&&e.gesSeleccionados.length>0?L(Oe||(Oe=m(['\n                <div style="margin-top: 1rem;">\n                  <p style="font-size: 1.3rem; color: #666; margin-bottom: 0.8rem;">Riesgos identificados:</p>\n                  <div style="display: flex; flex-wrap: wrap; gap: 0.8rem;">\n                    ',"\n                  </div>\n                </div>\n              "])),e.gesSeleccionados.map((function(e){return L(Te||(Te=m(['\n                      <span style="background: rgba(93, 196, 175, 0.1); color: #383d47; padding: 0.5rem 1rem; border-radius: 8px; font-size: 1.2rem; border: 1px solid #5dc4af;">\n                        ',"\n                      </span>\n                    "])),e.ges)}))):"")}))):L(Ne||(Ne=m(['\n        <div style="background: rgba(255, 152, 0, 0.1); border: 2px solid #ff9800; border-radius: 12px; padding: 2rem; margin-top: 3rem; text-align: center;">\n          <p style="font-size: 1.5rem; color: #ff9800;">‚ö†Ô∏è No se encontraron cargos evaluados</p>\n        </div>\n      ']))))},getData:function(){return{}},validate:function(){return{isValid:!0,errors:[]}}};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(){return u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.state=t,this.options=Ke({localStorageKey:n.localStorageKey||"genesys_draft",autoSaveInterval:n.autoSaveInterval||5e3,expirationTime:n.expirationTime||2592e5,enableBackendSync:n.enableBackendSync||!1,backendSyncInterval:n.backendSyncInterval||3e4},n),this.autoSaveTimer=null,this.backendSyncTimer=null,this.isInitialized=!1}),[{key:"init",value:function(){var e=this;this.isInitialized?console.warn("PersistenceManager already initialized"):(this.restore(),this.startAutoSave(),this.state.subscribe("*",(function(){e.scheduleAutoSave()})),this.options.enableBackendSync&&this.startBackendSync(),this.cleanExpiredData(),this.isInitialized=!0,console.log("‚úì PersistenceManager initialized"))}},{key:"destroy",value:function(){this.stopAutoSave(),this.stopBackendSync(),this.isInitialized=!1}},{key:"save",value:function(){try{var e=Ke(Ke({},this.state.getState()),{},{timestamp:Date.now(),version:"2.0"});return localStorage.setItem(this.options.localStorageKey,JSON.stringify(e)),this.state.markAsSaved(),console.log("üíæ State saved to localStorage"),!0}catch(e){if(console.error("Error saving state to localStorage:",e),"QuotaExceededError"===e.name){this.cleanExpiredData();try{return localStorage.setItem(this.options.localStorageKey,JSON.stringify(stateToSave)),!0}catch(e){console.error("Error saving after cleanup:",e)}}return!1}}},{key:"restore",value:function(){try{var e=localStorage.getItem(this.options.localStorageKey);if(!e)return console.log("No saved state found"),!1;var t=JSON.parse(e);return this.isExpired(t.timestamp)?(console.log("Saved state expired, clearing..."),this.clear(),!1):(this.state.loadState(t),console.log("‚úì State restored from localStorage"),!0)}catch(e){return console.error("Error restoring state from localStorage:",e),!1}}},{key:"clear",value:function(){try{return localStorage.removeItem(this.options.localStorageKey),console.log("‚úì Saved state cleared"),!0}catch(e){return console.error("Error clearing saved state:",e),!1}}},{key:"isExpired",value:function(e){return!e||Date.now()-e>this.options.expirationTime}},{key:"startAutoSave",value:function(){var e=this;this.autoSaveTimer&&clearInterval(this.autoSaveTimer),this.autoSaveTimer=setInterval((function(){e.save()}),this.options.autoSaveInterval)}},{key:"stopAutoSave",value:function(){this.autoSaveTimer&&(clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)}},{key:"scheduleAutoSave",value:function(){}},{key:"syncToBackend",value:(e=c(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.onLine){e.next=3;break}return console.log("Offline, skipping backend sync"),e.abrupt("return",!1);case 3:if(e.prev=3,0!==(t=this.state.getState()).cargos.length){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,fetch("/api/diagnostico/draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke(Ke({},t),{},{timestamp:Date.now()}))});case 9:if(!(n=e.sent).ok){e.next=15;break}return console.log("‚úì State synced to backend"),e.abrupt("return",!0);case 15:return console.warn("Backend sync failed:",n.statusText),e.abrupt("return",!1);case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(3),console.error("Error syncing to backend:",e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,19]])}))),function(){return e.apply(this,arguments)})},{key:"startBackendSync",value:function(){var e=this;this.backendSyncTimer&&clearInterval(this.backendSyncTimer),this.backendSyncTimer=setInterval((function(){e.syncToBackend()}),this.options.backendSyncInterval)}},{key:"stopBackendSync",value:function(){this.backendSyncTimer&&(clearInterval(this.backendSyncTimer),this.backendSyncTimer=null)}},{key:"cleanExpiredData",value:function(){try{for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);if(n&&n.startsWith("genesys_"))try{var a=JSON.parse(localStorage.getItem(n));a&&a.timestamp&&this.isExpired(a.timestamp)&&e.push(n)}catch(t){e.push(n)}}return e.forEach((function(e){localStorage.removeItem(e),console.log("Removed expired key: ".concat(e))})),e.length}catch(e){return console.error("Error cleaning expired data:",e),0}}},{key:"getStorageInfo",value:function(){try{var e=localStorage.getItem(this.options.localStorageKey);if(!e)return{exists:!1,size:0,timestamp:null,isExpired:!1};var t=JSON.parse(e),n=new Blob([e]).size;return{exists:!0,size:n,sizeFormatted:this.formatBytes(n),timestamp:t.timestamp?new Date(t.timestamp):null,isExpired:this.isExpired(t.timestamp),version:t.version||"1.0"}}catch(e){return console.error("Error getting storage info:",e),{exists:!1,error:e.message}}}},{key:"formatBytes",value:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}},{key:"exportAsJSON",value:function(){var e=this.state.getState(),t=JSON.stringify(e,null,2);return new Blob([t],{type:"application/json"})}},{key:"importFromJSON",value:function(e){try{var t=JSON.parse(e);return this.state.loadState(t),this.save(),console.log("‚úì State imported from JSON"),!0}catch(e){return console.error("Error importing state from JSON:",e),!1}}}]);var e}();function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(){return u((function e(){l(this,e),this.wizard=null,this.currentCargoIndex=0,this.totalCargos=0,this.dynamicSteps=[]}),[{key:"init",value:function(){new Ue(me,{autoSaveInterval:5e3,expirationTime:2592e5,enableBackendSync:!1}).init();var e=[De,qe,Re];this.wizard=new le(e,{container:document.getElementById("wizard-root"),onComplete:this.handleComplete.bind(this),onStepChange:this.handleStepChange.bind(this),enableKeyboardNavigation:!0,showProgress:!0,autoFocus:!0}),this.wizard.init(),this.interceptNextMethod()}},{key:"interceptNextMethod",value:function(){var e=this;this.wizard.next.bind(this.wizard);this.wizard.next=c(g().mark((function t(){var n,a,r,o,i;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("üîç Intercepting next from step:",e.wizard.currentStep),n=e.wizard.steps[e.wizard.currentStep],t.next=4,e.wizard.getCurrentStepData();case 4:return a=t.sent,console.log("Step data:",a),t.next=8,e.wizard.validateCurrentStep(a);case 8:if((r=t.sent).isValid){t.next=12;break}return e.wizard.showValidationErrors(r.errors),t.abrupt("return");case 12:if(e.wizard.data[n.id]=a,"numCargos"===n.id&&(e.totalCargos=parseInt(a.numCargos,10),console.log("‚úÖ Generando pasos din√°micos para",e.totalCargos,"cargos"),e.generateDynamicSteps()),!n.id||!n.id.startsWith("ges-selection-")){t.next=19;break}return o=parseInt(n.id.split("-")[2],10),console.log("‚úÖ GES selection completado para cargo",o,"- generando pasos de controles"),t.next=19,e.handleGESSelection(o);case 19:if(e.wizard.history.push(e.wizard.currentStep),e.wizard.currentStep++,!(e.wizard.currentStep>=e.wizard.steps.length)){t.next=25;break}return t.next=24,e.wizard.complete();case 24:return t.abrupt("return");case 25:if(e.wizard.options.onStepChange(e.wizard.currentStep,e.wizard.steps[e.wizard.currentStep]),!(i=e.wizard.steps[e.wizard.currentStep]).onEnter){t.next=30;break}return t.next=30,i.onEnter.call(e.wizard,e.wizard.data);case 30:return t.next=32,e.wizard.renderWithAnimation("forward");case 32:case"end":return t.stop()}}),t)})))}},{key:"handleStepChange",value:(n=c(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Step changed to:",n.id,"index:",t);case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"generateDynamicSteps",value:function(){var e=this;console.log("Generando pasos para ".concat(this.totalCargos," cargos")),this.dynamicSteps=[];for(var t=function(t){e.dynamicSteps.push(He(t,e.totalCargos));var n=e.wizard;e.dynamicSteps.push({id:"toggles-especiales-".concat(t),title:"Caracter√≠sticas especiales ".concat(t+1),render:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Ve(t,e.totalCargos,r);return o.render.apply(o,arguments)},getData:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Ve(t,e.totalCargos,r);return o.getData?o.getData.apply(o,arguments):{}},validate:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Ve(t,e.totalCargos,r);return o.validate.apply(o,arguments)},onEnter:function(){var e=n.data["cargo-info-".concat(t)],a=(null==e?void 0:e.cargoName)||"Cargo ".concat(t+1),r=Ve(t,this.totalCargos,a);if(r.onEnter){for(var o,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(o=r.onEnter).call.apply(o,[this].concat(s))}}}),e.dynamicSteps.push({id:"ges-selection-".concat(t),title:"Riesgos del cargo ".concat(t+1),render:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Fe(t,e.totalCargos,r);return o.render.apply(o,arguments)},getData:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Fe(t,e.totalCargos,r);return o.getData?o.getData.apply(o,arguments):{}},validate:function(){var a=n.data["cargo-info-".concat(t)],r=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),o=Fe(t,e.totalCargos,r);return o.validate.apply(o,arguments)},onEnter:function(){var e=n.data["cargo-info-".concat(t)],a=(null==e?void 0:e.cargoName)||"Cargo ".concat(t+1),r=Fe(t,this.totalCargos,a);if(r.onEnter){for(var o,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(o=r.onEnter).call.apply(o,[this].concat(s))}}})},n=0;n<this.totalCargos;n++)t(n);this.dynamicSteps.push(We),this.wizard.steps=[De,qe,Re].concat(i(this.dynamicSteps)),console.log("Pasos totales generados:",this.wizard.steps.length)}},{key:"handleGESSelection",value:(t=c(g().mark((function e(t){var n,a,r,o,i,s,c,l,d,u,p=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Generando pasos de controles y niveles para cargo ".concat(t)),console.log("this:",this),console.log("this.wizard:",this.wizard),console.log("this.wizard.data:",null===(n=this.wizard)||void 0===n?void 0:n.data),this.wizard&&this.wizard.data){e.next=7;break}return console.error("ERROR: this.wizard o this.wizard.data es undefined!"),e.abrupt("return");case 7:if(a=this.wizard.data["cargo-info-".concat(t)],(r=this.wizard.data["ges-selection-".concat(t)])&&r.gesSeleccionados&&0!==r.gesSeleccionados.length){e.next=11;break}return e.abrupt("return");case 11:o=(null==a?void 0:a.cargoName)||"Cargo ".concat(t+1),i=r.gesSeleccionados,s=[],i.forEach((function(e,n){s.push(Ge(t,n,o,e.riesgo,e.ges))})),c="ges-selection-".concat(t),l=this.wizard.steps.findIndex((function(e){return e.id===c})),-1!==l&&(u=this.wizard.steps.filter((function(e){return e.id.startsWith("controles-".concat(t,"-"))})),u.forEach((function(e){var t=p.wizard.steps.findIndex((function(t){return t.id===e.id}));-1!==t&&p.wizard.steps.splice(t,1)})),(d=this.wizard.steps).splice.apply(d,[l+1,0].concat(s)),console.log("Insertados ".concat(s.length," pasos de controles (con niveles integrados) para cargo ").concat(t)),console.log("Pasos totales ahora:",this.wizard.steps.length));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleComplete",value:(e=c(g().mark((function e(t){var n,a,r,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Wizard completado! Datos:",t),e.prev=1,t.empresa&&me.updateEmpresa(t.empresa),Object.keys(t).forEach((function(e){if(e.startsWith("cargo-info-")){var n=parseInt(e.split("-")[2],10),a=t[e],r=t["toggles-especiales-".concat(n)]||{},o=((t["ges-selection-".concat(n)]||{}).gesSeleccionados||[]).map((function(e,a){var r="controles-".concat(n,"-").concat(a),o=t[r]||{};return Ye(Ye({},e),{},{controles:{fuente:o.fuente||"",medio:o.medio||"",individuo:o.individuo||""},niveles:{deficiencia:{value:o.nd?parseInt(o.nd,10):null},exposicion:{value:o.ne?parseInt(o.ne,10):null},consecuencia:{value:o.nc?parseInt(o.nc,10):null}}})}));me.addCargo(Ye(Ye({},a),{},{tareasRutinarias:r.tareasRutinarias||!1,manipulaAlimentos:r.manipulaAlimentos||!1,trabajaAlturas:r.trabajaAlturas||!1,trabajaEspaciosConfinados:r.trabajaEspaciosConfinados||!1,conduceVehiculo:r.conduceVehiculo||!1,gesSeleccionados:o}))}})),(n=me.validate()).isValid){e.next=7;break}throw new Error("Validaci√≥n fallida: ".concat(n.errors.join(", ")));case 7:return a=me.getState(),console.log("Datos finales validados:",a),e.next=11,fetch("/api/flujo-ia",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 11:if((r=e.sent).ok){e.next=14;break}throw new Error("Error en el servidor: ".concat(r.status));case 14:return e.next=16,r.json();case 16:o=e.sent,console.log("Respuesta del servidor:",o),o.solicitudId?window.location.href="/pages/resultados_ia.html?id=".concat(o.solicitudId):alert("¬°Diagn√≥stico completado con √©xito!"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),console.error("Error al completar wizard:",e.t0),alert("Error: ".concat(e.t0.message));case 25:case"end":return e.stop()}}),e,null,[[1,21]])}))),function(t){return e.apply(this,arguments)})}]);var e,t,n}();document.addEventListener("DOMContentLoaded",(function(){(new Ze).init()}))})()})();