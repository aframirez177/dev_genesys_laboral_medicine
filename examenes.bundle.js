/*! For license information please see examenes.bundle.js.LICENSE.txt */
(()=>{var e={633:(e,t,a)=>{var r=a(738).default;function n(){"use strict";e.exports=n=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var t,a={},o=Object.prototype,i=o.hasOwnProperty,c=Object.defineProperty||function(e,t,a){e[t]=a.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function p(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,a){return e[t]=a}}function h(e,t,a,r){var n=t&&t.prototype instanceof x?t:x,o=Object.create(n.prototype),i=new M(r||[]);return c(o,"_invoke",{value:I(e,a,i)}),o}function v(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}a.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",b={};function x(){}function E(){}function S(){}var C={};p(C,l,(function(){return this}));var O=Object.getPrototypeOf,P=O&&O(O(j([])));P&&P!==o&&i.call(P,l)&&(C=P);var w=S.prototype=x.prototype=Object.create(C);function L(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function a(n,o,c,s){var l=v(e[n],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,s)}),(function(e){a("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return a("throw",e,c,s)}))}s(l.arg)}var n;c(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,n){a(e,r,t,n)}))}return n=n?n.then(o,o):o()}})}function I(e,a,r){var n=f;return function(o,i){if(n===g)throw Error("Generator is already running");if(n===y){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var l=v(e,a,r);if("normal"===l.type){if(n=r.done?y:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=y,r.method="throw",r.arg=l.arg)}}}function T(e,a){var r=a.method,n=e.iterator[r];if(n===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,T(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=v(n,e.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,b;var i=o.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,b):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var a=e[l];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function a(){for(;++n<e.length;)if(i.call(e,n))return a.value=e[n],a.done=!1,a;return a.value=t,a.done=!0,a};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return E.prototype=S,c(w,"constructor",{value:S,configurable:!0}),c(S,"constructor",{value:E,configurable:!0}),E.displayName=p(S,d,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,p(e,d,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},L(k.prototype),p(k.prototype,u,(function(){return this})),a.AsyncIterator=k,a.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var i=new k(h(e,t,r,n),o);return a.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(w),p(w,d,"Generator"),p(w,l,(function(){return this})),p(w,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},a.values=j,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function r(r,n){return c.type="throw",c.arg=e,a.next=r,n&&(a.method="next",a.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),N(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;N(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:j(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),b}},a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,a)=>{var r=a(633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,a,r,n,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(r,n)}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e){var a=function(e,a){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,a||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==t(a)?a:a+""}function n(e,t,a){return(t=r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}var i=a(756),c=a.n(i);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},d={EMO:{code:"EMO",fullName:"EXAMEN MEDICO CON ENFASIS OSTEOMUSCULAR",description:"Evalúa la salud del sistema musculoesquelético, identificando condiciones que puedan afectar el desempeño laboral.",basePrice:3e4},EMOA:{code:"EMOA",fullName:"EXAMEN MEDICO OSTEOMUSCULAR CON ENFASIS EN ALTURAS",description:"Evaluación específica para trabajo en alturas, incluyendo valoración del sistema vestibular y neurológico.",basePrice:33e3},AUD:{code:"AUD",fullName:"AUDIOMETRIA",description:"Mide la capacidad auditiva para identificar posibles pérdidas auditivas causadas por ruido ocupacional.",basePrice:16450},ESP:{code:"ESP",fullName:"ESPIROMETRÍA",description:"Evalúa la función pulmonar, detectando enfermedades respiratorias que puedan ser causadas o agravadas por el trabajo.",basePrice:16450},OPTO:{code:"OPTO",fullName:"OPTOMETRÍA",description:"Examina la salud visual y detecta problemas que puedan afectar el desempeño laboral o ser resultado de la exposición a riesgos en el trabajo.",basePrice:16450},VIS:{code:"VIS",fullName:"VISIOMETRÍA",description:"Mide la agudeza visual y otras capacidades visuales importantes para el trabajo.",basePrice:11900},ECG:{code:"ECG",fullName:"ELECTROCARDIOGRAMA",description:"Registra la actividad eléctrica del corazón para detectar enfermedades cardíacas.",basePrice:29400},RXC:{code:"RXC",fullName:"RAYOS X DE COLUMNA",description:"Obtiene imágenes de la columna vertebral para identificar lesiones o condiciones que puedan afectar la salud del trabajador.",basePrice:49e3},PSM:{code:"PSM",fullName:"PRUEBA PSICOSENSOMETRICA",description:"Evalúa habilidades sensoriales y motoras importantes para ciertas tareas laborales.",basePrice:30800},PST:{code:"PST",fullName:"PRUEBA PSICOTECNICA",description:"Mide aptitudes y habilidades cognitivas relevantes para el desempeño laboral.",basePrice:24500},GLI:{code:"GLI",fullName:"GLICEMIA",description:"Mide los niveles de azúcar en sangre para identificar diabetes u otras condiciones metabólicas.",basePrice:10500},CH:{code:"CH",fullName:"CUADRO HEMATICO",description:"Cuadro Hematico",basePrice:9800},PL:{code:"PL",fullName:"PERFIL LIPÍDICO",description:"Mide los niveles de colesterol y triglicéridos para evaluar el riesgo cardiovascular.",basePrice:22400},PAS:{code:"PAS",fullName:"PRUEBA DE ALCOHOL EN SALIVA",description:"Detectan consumo reciente de alcohol.",basePrice:28e3},PE:{code:"PE",fullName:"PRUEBA DE EMBARAZO",description:"Confirma o descarta un embarazo.",basePrice:12600},PSP:{code:"PSP",fullName:"PRUEBA DE SUSTANCIAS PSICOACTIVAS",description:"Detectan el consumo de drogas.",basePrice:23800},TGO:{code:"TGO",fullName:"TRANSAMINASAS TGO",description:"Evalúan la función hepática. Colesterol: Mide los niveles de colesterol en sangre.",basePrice:12600},TGP:{code:"TGP",fullName:"TRANSAMINASAS TGP",description:"Evalúan la función hepática. Colesterol: Mide los niveles de colesterol en sangre.",basePrice:12600},TRI:{code:"TRI",fullName:"TRIGLICÉRIDOS",description:"Mide los niveles de triglicéridos en sangre.",basePrice:10500},COL:{code:"COL",fullName:"COLESTEROL",description:"Mide los niveles de colesterol en sangre.",basePrice:10500},COP:{code:"COP",fullName:"COPROLOGICO",description:"Coprologico",basePrice:9800},LEP:{code:"LEP",fullName:"LEPTOSPIRA",description:"Leptospira",basePrice:80500},BRU:{code:"BRU",fullName:"BRUCELA",description:"Brucela",basePrice:80500},TOX:{code:"TOX",fullName:"TOXOPLASMA",description:"Toxoplasma",basePrice:40600}},p={"1-10":{min:1,max:10,discount:.05},"11-50":{min:11,max:50,discount:.1},"51-100":{min:51,max:100,discount:.15},"101-500":{min:101,max:500,discount:.2},"501+":{min:501,max:1/0,discount:.25}},h="calculatorState",v=864e5,f=function(){return t=function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.location.search.includes("newCalculation=true")&&localStorage.removeItem(h),this.cargos=[],this.nextCargoId=1,this.selectedExams=new Map,this.initializeElements(),this.bindEvents(),this.checkSavedData()){var t=JSON.parse(localStorage.getItem(h)),a=new Date(t.lastUpdate).toLocaleString(),r=t.cargos.length;confirm("Encontramos una cotización guardada con ".concat(r," cargo(s)\n")+"Última actualización: ".concat(a,"\n\n")+'¿Desea continuar con la cotización guardada?\n\nSeleccione "Aceptar" para continuar con la cotización guardada\nSeleccione "Cancelar" para comenzar una nueva')?this.restoreState():(localStorage.removeItem(h),this.addFirstCargo())}else this.addFirstCargo()},a=[{key:"checkAndRestoreSavedData",value:function(){if(this.checkSavedData()){var e=JSON.parse(localStorage.getItem(h)),t=new Date(e.lastUpdate).toLocaleString(),a=e.cargos.length;confirm("Encontramos una cotización guardada con ".concat(a," cargo(s)\n")+"Última actualización: ".concat(t,"\n\n")+'¿Desea continuar con la cotización guardada?\n\nSeleccione "Aceptar" para continuar con la cotización guardada\nSeleccione "Cancelar" para comenzar una nueva')?this.restoreState():(localStorage.removeItem(h),this.addFirstCargo())}}},{key:"initializeElements",value:function(){this.container=document.querySelector(".calculator"),this.container?(this.container.innerHTML=this.generateCalculatorHTML(),this.cargoContainer=this.container.querySelector("#job-positions"),this.addCargoButton=this.container.querySelector(".btn-add"),this.examDescription=this.container.querySelector("#examDescription"),this.totalPriceElement=this.container.querySelector(".total-price"),this.discountCheckboxes={time:this.container.querySelector("#discount2")},this.discountPercentageElement=this.container.querySelector("#discount-percentage")):console.error("No se encontró el contenedor de la calculadora")}},{key:"generateCalculatorHTML",value:function(){return'\n                <div class="calculator-header">\n                    <h1>Genera una cotización personalizada de los exámenes médicos ocupacionales para tu equipo de trabajo</h1>\n                </div>\n                <div class="calculator-body">\n                    <div class="calculator-form">\n                        <div class="section-calculator">\n                            <div id="job-positions"></div>\n                            <div class="container-btn-add">\n                                <button class="btn-add">+ Agrega un nuevo cargo aquí</button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="calculator-summary">\n                        <div class="exam-description">\n                            <h3 id="examTitle">Seleccione un examen</h3>\n                            <p id="examDescription">Pase el cursor sobre un examen para ver su descripción.</p>\n                        </div>\n                        <div class="exam-price">\n                            <p id="examPrice">Desde: <span class="min-price">$0</span></p>\n                        </div>\n                        <div class="package-summary"></div>\n                        <div class="discount-options">\n                            <div class="discount-option info-only">\n                                <div class="discount-info">\n                                    <div class="discount-header">\n                                        <span class="discount-title">Queremos apoyar el desarrollo</span>\n                                    </div>\n                                    <p class="discount-description">Por el tamaño de tu empresa tienes un beneficio</p>\n                                </div>\n                                <div class="discount-value" id="discount-percentage">-5%</div>\n                            </div>\n                            <div class="discount-option">\n                                <div class="discount-info">\n                                    <div class="discount-header">\n                                        <span class="discount-title">Ahorra tiempo y dinero</span>\n                                    </div>\n                                    <p class="discount-description">Todo mi equipo realizará sus examenes en una semana o asistirán un mínimo de 35 personas a la semana.</p>\n                                </div>\n                                <div class="discount-action">\n                                    <span class="discount-value">-5%</span>\n                                    <input type="checkbox" id="discount2">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="total">\n                            <p>Los exámenes de tu empresa tienen un valor de:</p>\n                            <p class="total-price">$0</p>\n                        </div>\n                        <button class="btn-download">Descarga Acá tu cotización</button>\n                    </div>\n                </div>\n            '}},{key:"bindEvents",value:function(){var e=this;this.addCargoButton.addEventListener("click",(function(){e.addCargo(),e.saveState()})),Object.values(this.discountCheckboxes).forEach((function(t){t.addEventListener("change",(function(){e.updateTotals(),e.saveState()}))})),this.cargoContainer.addEventListener("click",(function(t){var a=t.target;if(a.classList.contains("toggle-cargo")){var r=a.closest(".cargo");e.toggleCargo(r)}if(a.classList.contains("delete-cargo")){var n=a.closest(".cargo");e.removeCargo(n)}})),this.cargoContainer.addEventListener("input",(function(t){var a=t.target;a.classList.contains("cargo-name")&&(e.updateCargoName(a),e.updateTotals(),e.saveState())})),this.cargoContainer.addEventListener("change",(function(t){var a=t.target;a.classList.contains("exam-checkbox")&&(e.updateExamSelection(a),e.saveState()),a.classList.contains("num-trabajadores")&&(e.updateWorkerCount(a),e.saveState())})),this.cargoContainer.addEventListener("mouseover",(function(t){var a=t.target.closest(".checkbox-item");a&&e.showExamDescription(a.dataset.examCode)})),this.container.querySelector(".btn-download").addEventListener("click",(function(){return e.downloadQuotation()}))}},{key:"generateCargoHTML",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object.values(d).map((function(t){return'\n                    <div class="checkbox-item" \n                        data-exam-code="'.concat(t.code,'"\n                        title="').concat(t.fullName,'">\n                        <label for="exam-').concat(t.code,"-").concat(e,'">').concat(t.code,'</label>\n                        <input type="checkbox" \n                            id="exam-').concat(t.code,"-").concat(e,'"\n                            class="exam-checkbox"\n                            data-exam-code="').concat(t.code,'"\n                            data-cargo-id="').concat(e,'">\n                    </div>\n                ')})).join("");return'\n                <div class="cargo" data-cargo-id="'.concat(e,'">\n                    <div class="cargo-encabezado">\n                        <div class="cargo-header">\n                            <input type="text" \n                                class="cargo-name" \n                                placeholder="Acá el nombre del cargo"\n                                value="">\n                            <div class="cargo-controls">\n                            <div class="numero-trabajadores">\n                            <input type="number" \n                                class="num-trabajadores" \n                                min="1" \n                                value="1">\n                            </div>\n                                <button class="toggle-cargo">\n                                    ').concat(t?"-":"+","\n                                \n                            </div>\n                        </div>\n                        </button>\n                                ").concat(1!==e?'<button class="delete-cargo">×</button>':"",'\n                    </div>\n                    <div class="cargo-body ').concat(t?"":"hidden",'">\n                        <div class="exam-selector">\n                            <h4>Selecciona los exámenes requeridos:</h4>\n                            <div class="exam-grid">\n                                ').concat(a,"\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ")}},{key:"addFirstCargo",value:function(){this.cargoContainer.innerHTML="";var e=this.generateCargoHTML(this.nextCargoId);this.cargoContainer.innerHTML=e,this.cargos=[{id:this.nextCargoId,name:"Cargo ".concat(this.nextCargoId),workers:1,selectedExams:new Set}],this.nextCargoId++,this.updateTotals(),this.saveState()}},{key:"addCargo",value:function(){var e=this.generateCargoHTML(this.nextCargoId);this.cargoContainer.insertAdjacentHTML("beforeend",e),this.cargos.push({id:this.nextCargoId,name:"Cargo ".concat(this.nextCargoId),workers:1,selectedExams:new Set}),this.nextCargoId++,this.updateTotals(),this.saveState()}},{key:"removeCargo",value:function(e){var t=parseInt(e.dataset.cargoId);1!==t&&confirm("¿Está seguro de eliminar este cargo?")&&(e.remove(),this.cargos=this.cargos.filter((function(e){return e.id!==t})),this.updateTotals(),this.saveState())}},{key:"toggleCargo",value:function(e){var t=e.querySelector(".cargo-body"),a=e.querySelector(".toggle-cargo");t.classList.toggle("hidden"),a.textContent=t.classList.contains("hidden")?"+":"-"}},{key:"updateCargoName",value:function(e){var t=parseInt(e.closest(".cargo").dataset.cargoId),a=this.cargos.find((function(e){return e.id===t}));a&&(a.name=e.value.trim()||"Cargo ".concat(t),this.saveState(),this.updateTotals())}},{key:"updateExamSelection",value:function(e){var t=parseInt(e.dataset.cargoId),a=e.dataset.examCode,r=this.cargos.find((function(e){return e.id===t}));r&&(e.checked?r.selectedExams.add(a):r.selectedExams.delete(a),this.updateTotals(),this.saveState())}},{key:"updateWorkerCount",value:function(e){var t=parseInt(e.closest(".cargo").dataset.cargoId),a=this.cargos.find((function(e){return e.id===t}));a&&(a.workers=Math.max(1,parseInt(e.value)||1),this.updateTotals(),this.saveState())}},{key:"showExamDescription",value:function(e){var t=d[e];if(t){var a=this.container.querySelector("#examTitle"),r=this.container.querySelector("#examDescription"),n=this.container.querySelector("#examPrice .min-price");a.textContent=t.fullName,r.textContent=t.description,n.textContent=u(t.basePrice)}}},{key:"formatMoneyValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=u(e);return'<span class="valor-cantidad '.concat(t?"larger":"smaller",'">').concat(a,"</span>")}},{key:"calculateVolumeDiscount",value:function(){for(var e=this.cargos.reduce((function(e,t){return e+t.workers}),0),t=0,a=Object.values(p);t<a.length;t++){var r=a[t];if(e>=r.min&&e<=r.max)return r.discount}return 0}},{key:"updateTotals",value:function(){var e=this,t=0,a=this.container.querySelector(".package-summary");a.innerHTML="",this.cargos.forEach((function(r){var n=0;r.selectedExams.forEach((function(e){var t=d[e];t&&(n+=t.basePrice*r.workers)})),t+=n,a.insertAdjacentHTML("beforeend",'\n                    <div class="package-item">\n                        <div class="package-header">\n                            <h4>Paquete '.concat(r.name,'</h4>\n                        </div>\n                        <div class="valores-cargo">\n                            <div class="valor-item">\n                                <div class="valor-descripcion">\n                                    <span class="valor-label">Valor por trabajador:</span>\n                                </div>\n                                <div class="valor-monto">\n                                    ').concat(e.formatMoneyValue(n/(r.workers||1),!1),'\n                                </div>\n                            </div>\n                            <div class="valor-item">\n                                <div class="valor-descripcion">\n                                    <span class="valor-label">Total para ').concat(r.workers," trabajador").concat(1!==r.workers?"es":"",':</span>\n                                </div>\n                                <div class="valor-monto">\n                                    ').concat(e.formatMoneyValue(n,!0),"\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                "))}));var r=this.calculateVolumeDiscount(),n=t;n*=1-r,this.discountCheckboxes.time.checked&&(n*=.95),this.container.querySelector("#discount-percentage").textContent="-".concat((100*r).toFixed(0),"%"),this.totalPriceElement.textContent=u(n)}},{key:"checkSavedData",value:function(){try{var e=localStorage.getItem(h);if(!e)return!1;var t=JSON.parse(e);if(!t.lastUpdate)return!1;var a=new Date(t.lastUpdate).getTime();return(new Date).getTime()-a>v?(localStorage.removeItem(h),!1):t&&Array.isArray(t.cargos)&&t.cargos.length>0&&"number"==typeof t.nextCargoId}catch(e){return console.error("Error al verificar datos guardados:",e),!1}}},{key:"saveState",value:function(){var e={cargos:this.cargos.map((function(e){return{id:e.id,name:e.name,workers:e.workers,selectedExams:Array.from(e.selectedExams)}})),nextCargoId:this.nextCargoId,discounts:{time:this.discountCheckboxes.time.checked},lastUpdate:(new Date).toISOString()};try{localStorage.setItem(h,JSON.stringify(e)),console.log("Estado guardado exitosamente")}catch(e){console.error("Error al guardar estado:",e)}}},{key:"restoreState",value:function(){var e=this;try{var t=localStorage.getItem(h);if(!t)return!1;var a=JSON.parse(t);return this.cargoContainer.innerHTML="",this.cargos=[],a.cargos.forEach((function(t){var a=e.generateCargoHTML(t.id);e.cargoContainer.insertAdjacentHTML("beforeend",a);var r=e.cargoContainer.querySelector('[data-cargo-id="'.concat(t.id,'"]'));if(r){r.querySelector(".cargo-name").value=t.name,r.querySelector(".num-trabajadores").value=t.workers;var n={id:t.id,name:t.name,workers:t.workers,selectedExams:new Set};Array.isArray(t.selectedExams)&&t.selectedExams.forEach((function(e){var t=r.querySelector('[data-exam-code="'.concat(e,'"]'));if(t){var a=t.querySelector('input[type="checkbox"]');a&&(a.checked=!0,n.selectedExams.add(e))}})),e.cargos.push(n)}else console.error("No se pudo encontrar el elemento para el cargo ".concat(t.id))})),a.discounts&&(this.discountCheckboxes.time.checked=a.discounts.time),this.nextCargoId=a.nextCargoId,this.updateTotals(),console.log("Estado restaurado:",{cargos:this.cargos.map((function(e){return l(l({},e),{},{selectedExams:Array.from(e.selectedExams)})})),nextCargoId:this.nextCargoId,discounts:{time:this.discountCheckboxes.time.checked}}),!0}catch(e){return console.error("Error al restaurar estado:",e),!1}}},{key:"downloadQuotation",value:(n=c().mark((function e(){var t,a,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=this.generateQuotationContent(),a=new Blob([t],{type:"text/plain"}),r=window.URL.createObjectURL(a),(n=document.createElement("a")).href=r,n.download="cotizacion_examenes_".concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}catch(e){console.error("Error al generar la cotización:",e),alert("Hubo un error al generar la cotización. Por favor intente nuevamente.")}case 1:case"end":return e.stop()}}),e,this)})),i=function(){var t=this,a=arguments;return new Promise((function(r,o){var i=n.apply(t,a);function c(t){e(i,r,o,c,s,"next",t)}function s(t){e(i,r,o,c,s,"throw",t)}c(void 0)}))},function(){return i.apply(this,arguments)})},{key:"generateQuotationContent",value:function(){var e=[],t=(new Date).toLocaleDateString("es-CO");e.push("COTIZACIÓN DE EXÁMENES MÉDICOS OCUPACIONALES"),e.push("Fecha: ".concat(t)),e.push("==========================================\n"),this.cargos.forEach((function(t){e.push("CARGO: ".concat(t.name)),e.push("Número de trabajadores: ".concat(t.workers)),e.push("Exámenes seleccionados:");var a=0;t.selectedExams.forEach((function(r){var n=d[r],o=n.basePrice*t.workers;a+=o,e.push("- ".concat(n.fullName)),e.push("  Precio unitario: ".concat(u(n.basePrice))),e.push("  Subtotal: ".concat(u(o)))})),e.push("Subtotal para ".concat(t.name,": ").concat(u(a),"\n"))}));var a=this.calculateVolumeDiscount(),r=this.cargos.reduce((function(e,t){return e+t.workers}),0);return e.push("RESUMEN DE DESCUENTOS"),e.push("Total de trabajadores: ".concat(r)),e.push("Descuento por volumen: ".concat((100*a).toFixed(0),"%")),this.discountCheckboxes.time.checked&&e.push("Descuento adicional: 5%"),e.push("\nTOTAL FINAL"),e.push(this.totalPriceElement.textContent),e.join("\n")}}],a&&o(t.prototype,a),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a,r,n,i}();function m(){new f}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m()})()})();